---
title: 安装Archlinux手记
date: 2025-01-05
math: true
mermaid: true
sticky: 0
category: 折腾
tags:
---

Archlinux滚挂了两次，心累了。

## 硬件与目标

+ NVMe固态的笔记本电脑
+ 安装Debian单系统
+ 使用Btrfs磁盘格式
+ 安装GNOME桌面

## 前期准备

+ [ ] 下载安装镜像：https://www.debian.org/distrib/
    + 下载Live Gnome，虽然有烦人是小游戏，但能开箱即用
    + 不推荐「小型安装映像」与「完整安装映像」
    + 小型安装映像安装过程需要强制联网下载
    + 完整安装映像虽然不是强制联网，但是安装完还需要不少配置
+ SHA256校验镜像：随缘吧，心累了
+ 烧录U盘：https://etcher.balena.io/
    + dd命令虽然通用，但是看不到进度条，心里不安心

## 镜像与安装

无特别需要注意的，如果按照过程中U盘掉盘了，强制重启重装就好

### 准备非root用户

debian在安装时创建的用户默认没有sudo权限，需要手动添加

```shell
su #输入root密码
vi /etc/sudoers
#在%sudo ALL=(ALL:ALL) ALL下面添加
#xxx ALL=(ALL:ALL) ALL
#xxx为该用户的用户组
#不知道为什么是只读文件，但可以wq!强制保存
```

### 

```shell
sudo apt install -y adobe-source-han-serif-cn-fonts wqy-zenhei                     #几个开源中文字体。一般装上文泉驿就能解决大多 wine 应用中文方块的问题 todo,not work
sudo apt install -y noto-fonts-cjk noto-fonts-emoji noto-fonts-extra    #谷歌开源字体及表情 todo,not work
sudo apt install -y ntfs-3g git wget curl guake htop flatpak vim                   #一些常用软件
```

### 引导程序

```shell
#编辑引导配置，可选
#GRUB_CMDLINE_LINUX_DEFAULT的值改为：loglevel=5 nowatchdog，能加快关机速度
#GRUB_TIMEOUT，可设置grub等待时间(秒)
#GRUB_TIMEOUT_STYLE=hidden，可隐藏grub菜单
sudo vim /etc/default/grub
```

### 防火墙
