__NUXT_JSONP__("/view/%E5%8D%8F%E8%AE%AE/20191111/OAuth2.0%E5%8D%8F%E8%AE%AE", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av,aw,ax,ay){return {data:[{siteConfig:{siteName:_,siteHost:"https:\u002F\u002Fcellargalaxy.github.io",basePath:"\u002Fblog-code\u002F",navs:[{text:"文章",url:"\u002Fblog-code\u002Fpage\u002F1\u002F"},{text:"归档",url:"\u002Fblog-code\u002Farchive\u002F0\u002F"},{text:"画画",url:"\u002Fblog-code\u002Fhtml\u002Fhua.html"},{text:"开源",url:"\u002Fblog-code\u002Fhttps:\u002Fgithub.com\u002Fcellargalaxy\u002Fblog-vue"}],pageSize:10,urlReplace:{"^/file/blog/code":"https:\u002F\u002Foracleamd1.dynv6.net\u002Ffile\u002Ffile\u002Fblog\u002Fcode"},backgroundImage:{duration:$,fade:1000,images:[{url:"https:\u002F\u002Fi.loli.net\u002F2020\u002F01\u002F25\u002FcofTzDQXitjeVZ6.jpg",description:aa,type:w},{url:"https:\u002F\u002Fi.loli.net\u002F2020\u002F01\u002F25\u002FsfaRJ2lVeM3NDbE.jpg",description:aa,type:w},{url:"https:\u002F\u002Fi.loli.net\u002F2020\u002F01\u002F26\u002FKybiTdftam5Su7x.jpg",description:"青春猪头-双葉理央",type:w},{url:"https:\u002F\u002Fi.loli.net\u002F2020\u002F09\u002F08\u002FxdX73nfs24qgOYk.jpg",description:"京吹-明日香,久美子",type:w},{url:"https:\u002F\u002Fi.loli.net\u002F2020\u002F02\u002F14\u002FMAiruNcEFW2HYtg.jpg",description:"终将成为你-七海灯子,小糸侑",type:w},{url:"https:\u002F\u002Fi.loli.net\u002F2020\u002F02\u002F05\u002FEojdAxTDJsFpbPw.jpg",description:"玉子市场-北白川玉子",type:w},{url:"https:\u002F\u002Fi.loli.net\u002F2020\u002F01\u002F31\u002FAXxwJDRS9fmN2uU.jpg",description:"fate_hf-弓道馆",type:w},{url:"https:\u002F\u002Fi.loli.net\u002F2020\u002F02\u002F01\u002FaHhVObpJus6dnM4.jpg",description:"fate_hf-樱花树",type:w}]}},homeConfig:{brandInterval:$,brands:[{imageUrl:"https:\u002F\u002Fi.loli.net\u002F2020\u002F01\u002F21\u002FmMEAnwY5XPC2pFb.jpg",title:"日常",texts:["我们所度过的每个平凡的日常，也许就是连续不断发生的奇迹。","日々、私たちが過ごしている日常は、実は奇跡の連続なのかもしれない。"]},{imageUrl:"https:\u002F\u002Fi.loli.net\u002F2020\u002F04\u002F19\u002FH1MmXb9xPcYEhT2.jpg",title:"昨日之歌",texts:["时间梭梭箭如飞，人道漫漫步蹒跚","人間そんな変わるもんじゃないのに、月日ばっかどんどん過ぎて"]}],navs:[{text:"Github",url:"https:\u002F\u002Fgithub.com\u002Fcellargalaxy\u002F"}]},pageFootConfig:{lines:[[{text:"Copyright © 2017-? ."},{text:"备案？不存在的"},{text:"Powered by Nuxt.js & Github"}]]},buildTime:new Date(1659171921602),siteName:_,file:{slug:ab,description:"前言\n貌似我许久以前去尝试去看过OAuth2.0的东西，但看了一下这么鬼复杂，又这个请求那个请求，这个token那个token，哪用得着这么复杂~~（看不懂才对）~~，然后就放弃了。",createdAt:ac,updatedAt:ac,toc:[],body:{type:ad,children:[{type:a,tag:r,props:{id:G},children:[{type:a,tag:p,props:{href:ae,ariaHidden:s,tabIndex:t},children:[{type:a,tag:f,props:{className:[u,v]},children:[]}]},{type:b,value:G}]},{type:b,value:c},{type:a,tag:h,props:{},children:[{type:b,value:af}]},{type:b,value:c},{type:b,value:c},{type:a,tag:r,props:{id:"oauth-20是啥"},children:[{type:a,tag:p,props:{href:"#oauth-20%E6%98%AF%E5%95%A5",ariaHidden:s,tabIndex:t},children:[{type:a,tag:f,props:{className:[u,v]},children:[]}]},{type:b,value:"OAuth 2.0是啥"}]},{type:b,value:c},{type:a,tag:h,props:{},children:[{type:b,value:"OAuth2.0是一个行业的标准授权协议。他能够为Web，桌面，手机等设备应用的第三方服务，颁发一个有时效性的令牌token，使得第三方应用能够进行一些授权操作。例如需要注册某个论坛，可以用qq等账号进行第三方账号登录。这里就是利用OAuth2.0协议进行读取用户信息授权，免去手动填写注册信息的操作。"}]},{type:b,value:c},{type:a,tag:r,props:{id:"oauth20中的角色"},children:[{type:a,tag:p,props:{href:"#oauth20%E4%B8%AD%E7%9A%84%E8%A7%92%E8%89%B2",ariaHidden:s,tabIndex:t},children:[{type:a,tag:f,props:{className:[u,v]},children:[]}]},{type:b,value:"OAuth2.0中的角色"}]},{type:b,value:c},{type:a,tag:C,props:{},children:[{type:b,value:c},{type:a,tag:i,props:{},children:[{type:a,tag:g,props:{},children:[{type:b,value:"resource server"}]},{type:b,value:"，资源服务器，在上面的例子中，就是qq的用户信息服务器"}]},{type:b,value:c},{type:a,tag:i,props:{},children:[{type:a,tag:g,props:{},children:[{type:b,value:"authorization server"}]},{type:b,value:"，授权服务器，在上面的例子中，就是qq的授权服务器"}]},{type:b,value:c},{type:a,tag:i,props:{},children:[{type:a,tag:g,props:{},children:[{type:b,value:"resource owner"}]},{type:b,value:"，资源所有者，在上面的例子中，就是需要注册论坛的用户。资源所有者中所谓的资源指的是储存在qq的用户信息服务器里的用户信息，并不是论坛的资源"}]},{type:b,value:c},{type:a,tag:i,props:{},children:[{type:a,tag:g,props:{},children:[{type:b,value:"user-agent"}]},{type:b,value:"，用户代理，在上面的例子中，就是用于用于注册论坛账号的浏览器"}]},{type:b,value:c},{type:a,tag:i,props:{},children:[{type:a,tag:g,props:{},children:[{type:b,value:"client"}]},{type:b,value:"，客户端，在上面的例子中，就是论坛后台"}]},{type:b,value:c}]},{type:b,value:c},{type:a,tag:r,props:{id:ag},children:[{type:a,tag:p,props:{href:"#%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%90%91%E6%9C%8D%E5%8A%A1%E5%95%86%E6%B3%A8%E5%86%8C",ariaHidden:s,tabIndex:t},children:[{type:a,tag:f,props:{className:[u,v]},children:[]}]},{type:b,value:ag}]},{type:b,value:c},{type:a,tag:h,props:{},children:[{type:b,value:"服务端指的就是论坛。客户端一般需要向服务端注册，一般需要提供客户端的应用名称、应用网站、重定向URI或回调URL（redirect_uri），来向服务端表明一个什么样的客户端想获得服务端的授权和服务。同时服务端会给客户端一个客户端ID"},{type:a,tag:g,props:{},children:[{type:b,value:D}]},{type:b,value:"和客户端密钥"},{type:a,tag:g,props:{},children:[{type:b,value:H}]},{type:b,value:"。在将来客户端请求服务端的时候表明身份和授权。客户端标识可以公开，客户端密钥则需要保密。"}]},{type:b,value:c},{type:a,tag:r,props:{id:"oauth20授权类型"},children:[{type:a,tag:p,props:{href:"#oauth20%E6%8E%88%E6%9D%83%E7%B1%BB%E5%9E%8B",ariaHidden:s,tabIndex:t},children:[{type:a,tag:f,props:{className:[u,v]},children:[]}]},{type:b,value:"OAuth2.0授权类型"}]},{type:b,value:c},{type:a,tag:h,props:{},children:[{type:b,value:"OAuth2.0举例了四种授权模式，适用于不同的场景："}]},{type:b,value:c},{type:a,tag:"ul",props:{},children:[{type:b,value:c},{type:a,tag:i,props:{},children:[{type:b,value:ah}]},{type:b,value:c},{type:a,tag:i,props:{},children:[{type:b,value:ai}]},{type:b,value:c},{type:a,tag:i,props:{},children:[{type:b,value:aj}]},{type:b,value:c},{type:a,tag:i,props:{},children:[{type:b,value:ak}]},{type:b,value:c}]},{type:b,value:c},{type:a,tag:r,props:{id:"授权码模式authorization-code"},children:[{type:a,tag:p,props:{href:"#%E6%8E%88%E6%9D%83%E7%A0%81%E6%A8%A1%E5%BC%8Fauthorization-code",ariaHidden:s,tabIndex:t},children:[{type:a,tag:f,props:{className:[u,v]},children:[]}]},{type:b,value:ah}]},{type:b,value:c},{type:a,tag:h,props:{},children:[{type:b,value:"授权码模式是功能最完整、流程最严密的授权模式。大致流程是："}]},{type:b,value:c},{type:a,tag:C,props:{},children:[{type:b,value:c},{type:a,tag:i,props:{},children:[{type:b,value:al}]},{type:b,value:c},{type:a,tag:i,props:{},children:[{type:b,value:am}]},{type:b,value:c},{type:a,tag:i,props:{},children:[{type:b,value:"授权服务器返回一个授权码给用户代理，并根据客户端设定好的重定向地址，用户代理将授权码重定向给客户端"}]},{type:b,value:c},{type:a,tag:i,props:{},children:[{type:b,value:"客户端获取到授权码，去授权服务器获取token"}]},{type:b,value:c},{type:a,tag:i,props:{},children:[{type:b,value:"授权服务器检查授权码，并返回token"}]},{type:b,value:c},{type:a,tag:i,props:{},children:[{type:b,value:"客户端获取到token，根据token去资源服务器获取资源"}]},{type:b,value:c}]},{type:b,value:c},{type:a,tag:l,props:{className:[m]},children:[{type:a,tag:n,props:{className:[o,q]},children:[{type:a,tag:g,props:{},children:[{type:b,value:"    +----------+\n    | Resource |\n    |   Owner  |\n    |          |\n    +----------+\n         ^\n         |\n        (B)\n    +----|-----+          Client Identifier      +---------------+\n    |         -+----(A)-- & Redirection URI ----\u003E|               |\n    |  User-   |                                 | Authorization |\n    |  Agent  -+----(B)-- User authenticates ---\u003E|     Server    |\n    |          |                                 |               |\n    |         -+----(C)-- Authorization Code ---\u003C|               |\n    +-|----|---+                                 +---------------+\n      |    |                                         ^      v\n     (A)  (C)                                        |      |\n      |    |                                         |      |\n      ^    v                                         |      |\n    +---------+                                      |      |\n    |         |\u003E---(D)-- Authorization Code ---------'      |\n    |  Client |          & Redirection URI                  |\n    |         |                                             |\n    |         |\u003C---(E)----- Access Token -------------------'\n    +---------+       (w\u002F Optional Refresh Token)\n\n    Note: The lines illustrating steps (A), (B), and (C) are broken into\n    two parts as they pass through the user-agent.\n\n                    Figure 3: Authorization Code Flow\n"}]}]}]},{type:b,value:c},{type:a,tag:h,props:{},children:[{type:b,value:"1、客户端重定向授权服务器的授权页面给用户代理，授权服务器返回一个授权码"}]},{type:b,value:c},{type:a,tag:l,props:{className:[m]},children:[{type:a,tag:n,props:{className:[o,q]},children:[{type:a,tag:g,props:{},children:[{type:b,value:"https:\u002F\u002Fqq.com\u002Flogin\u002Foauth\u002Fauthorize?\n  response_type=code&\n  client_id=a5ce5a6c7e8c39567ca0&\n  redirect_uri=https:\u002F\u002Fbbs.net\u002Fapi\u002Foauth\u002Fcallback&\n  scope=user:email\n"}]}]}]},{type:b,value:N},{type:a,tag:x,props:{},children:[{type:a,tag:y,props:{},children:[{type:a,tag:e,props:{},children:[{type:a,tag:k,props:{},children:[{type:b,value:z}]},{type:a,tag:k,props:{},children:[{type:b,value:A}]}]}]},{type:a,tag:B,props:{},children:[{type:a,tag:e,props:{},children:[{type:a,tag:d,props:{},children:[{type:b,value:an}]},{type:a,tag:d,props:{},children:[{type:b,value:"必须，固定为 code，表示这是授权码模式"}]}]},{type:a,tag:e,props:{},children:[{type:a,tag:d,props:{},children:[{type:b,value:D}]},{type:a,tag:d,props:{},children:[{type:b,value:"必须，客户端向服务端注册获得的客户端ID"}]}]},{type:a,tag:e,props:{},children:[{type:a,tag:d,props:{},children:[{type:b,value:ao}]},{type:a,tag:d,props:{},children:[{type:b,value:"可选，通过客户端注册的重定向URI，一般与注册时一致"}]}]},{type:a,tag:e,props:{},children:[{type:a,tag:d,props:{},children:[{type:b,value:I}]},{type:a,tag:d,props:{},children:[{type:b,value:"可选，请求资源范围，多个空格隔开"}]}]},{type:a,tag:e,props:{},children:[{type:a,tag:d,props:{},children:[{type:b,value:O}]},{type:a,tag:d,props:{},children:[{type:b,value:"可选，如果存在，原样返回给客户端"}]}]}]}]},{type:b,value:c},{type:a,tag:h,props:{},children:[{type:b,value:E}]},{type:b,value:c},{type:a,tag:l,props:{className:[m]},children:[{type:a,tag:n,props:{className:[o,q]},children:[{type:a,tag:g,props:{},children:[{type:b,value:"https:\u002F\u002Fbbs.net\u002Fapi\u002Foauth\u002Fcallback?code=fb6a88dc09e843b33f\n"}]}]}]},{type:b,value:ap},{type:a,tag:x,props:{},children:[{type:a,tag:y,props:{},children:[{type:a,tag:e,props:{},children:[{type:a,tag:k,props:{},children:[{type:b,value:z}]},{type:a,tag:k,props:{},children:[{type:b,value:A}]}]}]},{type:a,tag:B,props:{},children:[{type:a,tag:e,props:{},children:[{type:a,tag:d,props:{},children:[{type:b,value:g}]},{type:a,tag:d,props:{},children:[{type:b,value:"必须。授权码"}]}]},{type:a,tag:e,props:{},children:[{type:a,tag:d,props:{},children:[{type:b,value:O}]},{type:a,tag:d,props:{},children:[{type:b,value:"如果出现在请求中，必须包含"}]}]}]}]},{type:b,value:c},{type:a,tag:h,props:{},children:[{type:b,value:"2、客户端获取到授权码，去授权服务器获取token"}]},{type:b,value:c},{type:a,tag:l,props:{className:[m]},children:[{type:a,tag:n,props:{className:[o,q]},children:[{type:a,tag:g,props:{},children:[{type:b,value:"https:\u002F\u002Fqq.com\u002Flogin\u002Foauth\u002Faccess_token?\n  client_id=a5ce5a6c7e8c39567ca0&\n  client_secret=xxxx&\n  grant_type=authorization_code&\n  code=fb6a88dc09e843b33f&\n  redirect_uri=https:\u002F\u002Fbbs.net\u002Fapi\u002Foauth\u002Fcallback\n"}]}]}]},{type:b,value:N},{type:a,tag:x,props:{},children:[{type:a,tag:y,props:{},children:[{type:a,tag:e,props:{},children:[{type:a,tag:k,props:{},children:[{type:b,value:z}]},{type:a,tag:k,props:{},children:[{type:b,value:A}]}]}]},{type:a,tag:B,props:{},children:[{type:a,tag:e,props:{},children:[{type:a,tag:d,props:{},children:[{type:b,value:D}]},{type:a,tag:d,props:{},children:[{type:b,value:"必须，客户端标识"}]}]},{type:a,tag:e,props:{},children:[{type:a,tag:d,props:{},children:[{type:b,value:H}]},{type:a,tag:d,props:{},children:[{type:b,value:"必须，客户端密钥"}]}]},{type:a,tag:e,props:{},children:[{type:a,tag:d,props:{},children:[{type:b,value:P}]},{type:a,tag:d,props:{},children:[{type:b,value:"必须，固定为 authorization_code／refresh_token"}]}]},{type:a,tag:e,props:{},children:[{type:a,tag:d,props:{},children:[{type:b,value:g}]},{type:a,tag:d,props:{},children:[{type:b,value:"必须，上一步获取到的授权码"}]}]},{type:a,tag:e,props:{},children:[{type:a,tag:d,props:{},children:[{type:b,value:ao}]},{type:a,tag:d,props:{},children:[{type:b,value:"必须，完成授权后的回调地址，一般与注册时一致"}]}]}]}]},{type:b,value:c},{type:a,tag:h,props:{},children:[{type:b,value:E}]},{type:b,value:c},{type:a,tag:l,props:{className:[m]},children:[{type:a,tag:n,props:{className:[o,"language-json"]},children:[{type:a,tag:g,props:{},children:[{type:a,tag:f,props:{className:[j,F]},children:[{type:b,value:"{"}]},{type:b,value:J},{type:a,tag:f,props:{className:[j,K]},children:[{type:b,value:"\"access_token\""}]},{type:a,tag:f,props:{className:[j,L]},children:[{type:b,value:M}]},{type:a,tag:f,props:{className:[j,Q]},children:[{type:b,value:"\"a14afef0f66fcffce3e0fcd2e34f6ff4\""}]},{type:a,tag:f,props:{className:[j,F]},children:[{type:b,value:R}]},{type:b,value:J},{type:a,tag:f,props:{className:[j,K]},children:[{type:b,value:"\"token_type\""}]},{type:a,tag:f,props:{className:[j,L]},children:[{type:b,value:M}]},{type:a,tag:f,props:{className:[j,Q]},children:[{type:b,value:"\"bearer\""}]},{type:a,tag:f,props:{className:[j,F]},children:[{type:b,value:R}]},{type:b,value:J},{type:a,tag:f,props:{className:[j,K]},children:[{type:b,value:"\"expires_in\""}]},{type:a,tag:f,props:{className:[j,L]},children:[{type:b,value:M}]},{type:a,tag:f,props:{className:[j,"number"]},children:[{type:b,value:"3920"}]},{type:a,tag:f,props:{className:[j,F]},children:[{type:b,value:R}]},{type:b,value:J},{type:a,tag:f,props:{className:[j,K]},children:[{type:b,value:"\"refresh_token\""}]},{type:a,tag:f,props:{className:[j,L]},children:[{type:b,value:M}]},{type:a,tag:f,props:{className:[j,Q]},children:[{type:b,value:"\"5d633d136b6d56a41829b73a424803ec\""}]},{type:b,value:c},{type:a,tag:f,props:{className:[j,F]},children:[{type:b,value:"}"}]},{type:b,value:c}]}]}]},{type:b,value:S},{type:a,tag:x,props:{},children:[{type:a,tag:y,props:{},children:[{type:a,tag:e,props:{},children:[{type:a,tag:k,props:{},children:[{type:b,value:z}]},{type:a,tag:k,props:{},children:[{type:b,value:A}]}]}]},{type:a,tag:B,props:{},children:[{type:a,tag:e,props:{},children:[{type:a,tag:d,props:{},children:[{type:b,value:aq}]},{type:a,tag:d,props:{},children:[{type:b,value:"这个就是最终获取到的令牌"}]}]},{type:a,tag:e,props:{},children:[{type:a,tag:d,props:{},children:[{type:b,value:T}]},{type:a,tag:d,props:{},children:[{type:b,value:ar}]}]},{type:a,tag:e,props:{},children:[{type:a,tag:d,props:{},children:[{type:b,value:U}]},{type:a,tag:d,props:{},children:[{type:b,value:as}]}]},{type:a,tag:e,props:{},children:[{type:a,tag:d,props:{},children:[{type:b,value:at}]},{type:a,tag:d,props:{},children:[{type:b,value:au}]}]}]}]},{type:b,value:c},{type:a,tag:r,props:{id:"隐藏模式implicit"},children:[{type:a,tag:p,props:{href:"#%E9%9A%90%E8%97%8F%E6%A8%A1%E5%BC%8Fimplicit",ariaHidden:s,tabIndex:t},children:[{type:a,tag:f,props:{className:[u,v]},children:[]}]},{type:b,value:ai}]},{type:b,value:c},{type:a,tag:h,props:{},children:[{type:b,value:"隐藏模式一般用于移动客户端或网页客户端。隐藏式相较于授权码模式，会省略通过授权码获取token的步骤，并且在用户代理直接获取token。会存在token泄露给给用户和用户设备上的其它客户端的风险，因此只用于安全要求不高，并且令牌的有效期非常短，例如会话期间。大致流程是："}]},{type:b,value:c},{type:a,tag:C,props:{},children:[{type:b,value:c},{type:a,tag:i,props:{},children:[{type:b,value:al}]},{type:b,value:c},{type:a,tag:i,props:{},children:[{type:b,value:am}]},{type:b,value:c},{type:a,tag:i,props:{},children:[{type:b,value:"授权服务器返回token给用户代理"}]},{type:b,value:c}]},{type:b,value:c},{type:a,tag:l,props:{className:[m]},children:[{type:a,tag:n,props:{className:[o,q]},children:[{type:a,tag:g,props:{},children:[{type:b,value:"    +----------+\n    | Resource |\n    |  Owner   |\n    |          |\n    +----------+\n         ^\n         |\n        (B)\n    +----|-----+          Client Identifier     +---------------+\n    |         -+----(A)-- & Redirection URI ---\u003E|               |\n    |  User-   |                                | Authorization |\n    |  Agent  -|----(B)-- User authenticates --\u003E|     Server    |\n    |          |                                |               |\n    |          |\u003C---(C)--- Redirection URI ----\u003C|               |\n    |          |          with Access Token     +---------------+\n    |          |            in Fragment\n    |          |                                +---------------+\n    |          |----(D)--- Redirection URI ----\u003E|   Web-Hosted  |\n    |          |          without Fragment      |     Client    |\n    |          |                                |    Resource   |\n    |     (F)  |\u003C---(E)------- Script ---------\u003C|               |\n    |          |                                +---------------+\n    +-|--------+\n      |    |\n     (A)  (G) Access Token\n      |    |\n      ^    v\n    +---------+\n    |         |\n    |  Client |\n    |         |\n    +---------+\n\n    Note: The lines illustrating steps (A) and (B) are broken into two\n    parts as they pass through the user-agent.\n\n                    Figure 4: Implicit Grant Flow\n"}]}]}]},{type:b,value:c},{type:a,tag:h,props:{},children:[{type:b,value:"1、客户端重定向授权服务器的授权页面给用户代理，授权服务器返回token"}]},{type:b,value:c},{type:a,tag:l,props:{className:[m]},children:[{type:a,tag:n,props:{className:[o,q]},children:[{type:a,tag:g,props:{},children:[{type:b,value:"https:\u002F\u002Fqq.com\u002Flogin\u002Foauth\u002Faccess_token?\n  response_type=token&\n  client_id=a5ce5a6c7e8c39567ca0&\n  redirect_uri=https:\u002F\u002Fbbs.net\u002Fapi\u002Foauth\u002Fcallback&\n  scope=user:email\n"}]}]}]},{type:b,value:S},{type:a,tag:x,props:{},children:[{type:a,tag:y,props:{},children:[{type:a,tag:e,props:{},children:[{type:a,tag:k,props:{},children:[{type:b,value:z}]},{type:a,tag:k,props:{},children:[{type:b,value:A}]}]}]},{type:a,tag:B,props:{},children:[{type:a,tag:e,props:{},children:[{type:a,tag:d,props:{},children:[{type:b,value:an}]},{type:a,tag:d,props:{},children:[{type:b,value:"必须，固定为token，代表这是隐藏模式"}]}]},{type:a,tag:e,props:{},children:[{type:a,tag:d,props:{},children:[{type:b,value:T}]},{type:a,tag:d,props:{},children:[{type:b,value:ar}]}]},{type:a,tag:e,props:{},children:[{type:a,tag:d,props:{},children:[{type:b,value:U}]},{type:a,tag:d,props:{},children:[{type:b,value:as}]}]},{type:a,tag:e,props:{},children:[{type:a,tag:d,props:{},children:[{type:b,value:at}]},{type:a,tag:d,props:{},children:[{type:b,value:au}]}]}]}]},{type:b,value:c},{type:a,tag:h,props:{},children:[{type:b,value:E}]},{type:b,value:c},{type:a,tag:h,props:{},children:[{type:b,value:"可以看到返回值的access_token放在锚点里，由于锚点不会发到服务器，减少了因\"中间人攻击\"泄漏令牌的风险。"}]},{type:b,value:c},{type:a,tag:l,props:{className:[m]},children:[{type:a,tag:n,props:{className:[o,q]},children:[{type:a,tag:g,props:{},children:[{type:b,value:"https:\u002F\u002Fbbs.net\u002Fapi\u002Foauth\u002Fcallback#\n  access_token=a14afef0f66fcffce3e0fcd2e34f6ff4&\n  token_type=token&\n  expires_in=3600\n"}]}]}]},{type:b,value:N},{type:a,tag:x,props:{},children:[{type:a,tag:y,props:{},children:[{type:a,tag:e,props:{},children:[{type:a,tag:k,props:{},children:[{type:b,value:z}]},{type:a,tag:k,props:{},children:[{type:b,value:A}]}]}]},{type:a,tag:B,props:{},children:[{type:a,tag:e,props:{},children:[{type:a,tag:d,props:{},children:[{type:b,value:aq}]},{type:a,tag:d,props:{},children:[{type:b,value:"必须。授权服务器分配的访问令牌"}]}]},{type:a,tag:e,props:{},children:[{type:a,tag:d,props:{},children:[{type:b,value:T}]},{type:a,tag:d,props:{},children:[{type:b,value:"必须。令牌类型"}]}]},{type:a,tag:e,props:{},children:[{type:a,tag:d,props:{},children:[{type:b,value:U}]},{type:a,tag:d,props:{},children:[{type:b,value:"推荐，访问令牌过期的秒数"}]}]},{type:a,tag:e,props:{},children:[{type:a,tag:d,props:{},children:[{type:b,value:I}]},{type:a,tag:d,props:{},children:[{type:b,value:V}]}]},{type:a,tag:e,props:{},children:[{type:a,tag:d,props:{},children:[{type:b,value:O}]},{type:a,tag:d,props:{},children:[{type:b,value:"必须，如果出现在授权请求期间，和请求中的 state 参数一样"}]}]}]}]},{type:b,value:c},{type:a,tag:r,props:{id:"密码模式resource-owner-password-credentials"},children:[{type:a,tag:p,props:{href:"#%E5%AF%86%E7%A0%81%E6%A8%A1%E5%BC%8Fresource-owner-password-credentials",ariaHidden:s,tabIndex:t},children:[{type:a,tag:f,props:{className:[u,v]},children:[]}]},{type:b,value:aj}]},{type:b,value:c},{type:a,tag:h,props:{},children:[{type:b,value:"密码模式是资源所有者直接将他在服务端的账号密码给客户端，客户端通过账号密码登录服务端进行操作。在这种模式中，客户端不得储存密码。并且通常用在用户对客户端高度信任的情况下，比如客户端是操作系统的一部分，或者由一个著名公司出品才会使用。以及在授权服务器无法使用其他授权模式的情况下，才能考虑使用这种模式。"}]},{type:b,value:c},{type:a,tag:C,props:{},children:[{type:b,value:c},{type:a,tag:i,props:{},children:[{type:b,value:"资源所有者通过用户代理给客户端账号密码"}]},{type:b,value:c},{type:a,tag:i,props:{},children:[{type:b,value:"客户端通过账号密码向授权服务器获取token"}]},{type:b,value:c}]},{type:b,value:c},{type:a,tag:l,props:{className:[m]},children:[{type:a,tag:n,props:{className:[o,q]},children:[{type:a,tag:g,props:{},children:[{type:b,value:"    +----------+\n    | Resource |\n    |  Owner   |\n    |          |\n    +----------+\n         v\n         |    Resource Owner\n        (A) Password Credentials\n         |\n         v\n    +---------+                                  +---------------+\n    |         |\u003E--(B)---- Resource Owner -------\u003E|               |\n    |         |         Password Credentials     | Authorization |\n    | Client  |                                  |     Server    |\n    |         |\u003C--(C)---- Access Token ---------\u003C|               |\n    |         |    (w\u002F Optional Refresh Token)   |               |\n    +---------+                                  +---------------+\n\n            Figure 5: Resource Owner Password Credentials Flow\n"}]}]}]},{type:b,value:c},{type:a,tag:h,props:{},children:[{type:b,value:"1、客户端通过账号密码向授权服务器获取token"}]},{type:b,value:c},{type:a,tag:l,props:{className:[m]},children:[{type:a,tag:n,props:{className:[o,q]},children:[{type:a,tag:g,props:{},children:[{type:b,value:"https:\u002F\u002Fqq.com\u002Flogin\u002Foauth\u002Faccess_token?grant_type=password&username=USERNAME&password=PASSWORD&client_id=CLIENT_ID\n"}]}]}]},{type:b,value:S},{type:a,tag:x,props:{},children:[{type:a,tag:y,props:{},children:[{type:a,tag:e,props:{},children:[{type:a,tag:k,props:{},children:[{type:b,value:z}]},{type:a,tag:k,props:{},children:[{type:b,value:A}]}]}]},{type:a,tag:B,props:{},children:[{type:a,tag:e,props:{},children:[{type:a,tag:d,props:{},children:[{type:b,value:P}]},{type:a,tag:d,props:{},children:[{type:b,value:"必须，固定为 password"}]}]},{type:a,tag:e,props:{},children:[{type:a,tag:d,props:{},children:[{type:b,value:"username"}]},{type:a,tag:d,props:{},children:[{type:b,value:"必须，UTF-8 编码的资源拥有者用户名"}]}]},{type:a,tag:e,props:{},children:[{type:a,tag:d,props:{},children:[{type:b,value:"password"}]},{type:a,tag:d,props:{},children:[{type:b,value:"必须，UTF-8 编码的资源拥有者密码"}]}]},{type:a,tag:e,props:{},children:[{type:a,tag:d,props:{},children:[{type:b,value:I}]},{type:a,tag:d,props:{},children:[{type:b,value:V}]}]}]}]},{type:b,value:c},{type:a,tag:h,props:{},children:[{type:b,value:E}]},{type:b,value:c},{type:a,tag:l,props:{className:[m]},children:[{type:a,tag:n,props:{className:[o,q]},children:[{type:a,tag:g,props:{},children:[{type:b,value:av}]}]}]},{type:b,value:c},{type:a,tag:r,props:{id:"客户端模式client-credentials"},children:[{type:a,tag:p,props:{href:"#%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%A8%A1%E5%BC%8Fclient-credentials",ariaHidden:s,tabIndex:t},children:[{type:a,tag:f,props:{className:[u,v]},children:[]}]},{type:b,value:ak}]},{type:b,value:c},{type:a,tag:h,props:{},children:[{type:b,value:"客户端模式中，对服务端而言，客户端充当了资源所有者的角色，因为服务端已经看不到资源所有者。客户端只需要"},{type:a,tag:g,props:{},children:[{type:b,value:D}]},{type:b,value:aw},{type:a,tag:g,props:{},children:[{type:b,value:H}]},{type:b,value:"就可以操作资源了。所以其实不存在资源所有者授权给客户端的问题，或者资源所有者在一切之初已经将全部权限无限期移交给客户端。"}]},{type:b,value:c},{type:a,tag:C,props:{},children:[{type:b,value:c},{type:a,tag:i,props:{},children:[{type:b,value:"客户端通过"},{type:a,tag:g,props:{},children:[{type:b,value:D}]},{type:b,value:aw},{type:a,tag:g,props:{},children:[{type:b,value:H}]},{type:b,value:"，向授权服务器申请token"}]},{type:b,value:c}]},{type:b,value:c},{type:a,tag:l,props:{className:[m]},children:[{type:a,tag:n,props:{className:[o,q]},children:[{type:a,tag:g,props:{},children:[{type:b,value:"    +---------+                                  +---------------+\n    |         |                                  |               |\n    |         |\u003E--(A)- Client Authentication ---\u003E| Authorization |\n    | Client  |                                  |     Server    |\n    |         |\u003C--(B)---- Access Token ---------\u003C|               |\n    |         |                                  |               |\n    +---------+                                  +---------------+\n\n                    Figure 6: Client Credentials Flow\n"}]}]}]},{type:b,value:c},{type:a,tag:l,props:{className:[m]},children:[{type:a,tag:n,props:{className:[o,q]},children:[{type:a,tag:g,props:{},children:[{type:b,value:"https:\u002F\u002Fqq.com\u002Flogin\u002Foauth\u002Faccess_token?grant_type=client_credentials&client_id=CLIENT_ID&client_secret=CLIENT_SECRET\n"}]}]}]},{type:b,value:ap},{type:a,tag:x,props:{},children:[{type:a,tag:y,props:{},children:[{type:a,tag:e,props:{},children:[{type:a,tag:k,props:{},children:[{type:b,value:z}]},{type:a,tag:k,props:{},children:[{type:b,value:A}]}]}]},{type:a,tag:B,props:{},children:[{type:a,tag:e,props:{},children:[{type:a,tag:d,props:{},children:[{type:b,value:P}]},{type:a,tag:d,props:{},children:[{type:b,value:"必须。必须设置到客户端证书中"}]}]},{type:a,tag:e,props:{},children:[{type:a,tag:d,props:{},children:[{type:b,value:I}]},{type:a,tag:d,props:{},children:[{type:b,value:V}]}]}]}]},{type:b,value:c},{type:a,tag:h,props:{},children:[{type:b,value:E}]},{type:b,value:c},{type:a,tag:l,props:{className:[m]},children:[{type:a,tag:n,props:{className:[o,q]},children:[{type:a,tag:g,props:{},children:[{type:b,value:av}]}]}]},{type:b,value:c},{type:a,tag:h,props:{},children:[{type:b,value:"参考文章："}]},{type:b,value:c},{type:a,tag:h,props:{},children:[{type:a,tag:p,props:{href:"https:\u002F\u002Fdeepzz.com\u002Fpost\u002Fwhat-is-oauth2-protocol.html",rel:[W,X,Y],target:Z},children:[{type:b,value:"10 分钟理解什么是 OAuth 2.0 协议"}]}]},{type:b,value:c},{type:a,tag:h,props:{},children:[{type:a,tag:p,props:{href:"https:\u002F\u002Fwww.ruanyifeng.com\u002Fblog\u002F2014\u002F05\u002Foauth_2_0.html",rel:[W,X,Y],target:Z},children:[{type:b,value:"理解OAuth 2.0"}]}]},{type:b,value:c},{type:a,tag:h,props:{},children:[{type:a,tag:p,props:{href:"https:\u002F\u002Fwww.ruanyifeng.com\u002Fblog\u002F2019\u002F04\u002Foauth-grant-types.html",rel:[W,X,Y],target:Z},children:[{type:b,value:"OAuth 2.0 的四种方式"}]}]}]},excerpt:{type:ad,children:[{type:a,tag:r,props:{id:G},children:[{type:a,tag:p,props:{ariaHidden:s,href:ae,tabIndex:t},children:[{type:a,tag:f,props:{className:[u,v]},children:[]}]},{type:b,value:G}]},{type:b,value:c},{type:a,tag:h,props:{},children:[{type:b,value:af}]}]},dir:ax,path:"\u002F协议\u002F20191111\u002FOAuth2.0协议",extension:".md",title:ab,url:"\u002Fblog-code\u002Fview\u002F协议\u002F20191111\u002FOAuth2.0协议\u002F",createAt:new Date(1573430400000),updateAt:new Date(1573430400000),attributes:[{name:"createAt",value:ay},{name:"updateAt",value:ay},{name:"sort",value:ax,url:"\u002Fblog-code\u002Fpage\u002F协议\u002F20191111\u002F1\u002F"}]}}],fetch:{},mutations:void 0}}("element","text","\n","td","tr","span","code","p","li","token","th","div","nuxt-content-highlight","pre","line-numbers","a","language-text","h1","true",-1,"icon","icon-link","wide","table","thead","字段","描述","tbody","ol","client_id","返回值：","punctuation","前言","client_secret","scope","\n  ","property","operator",":","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","state","grant_type","string",",","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","token_type","expires_in","可选，访问令牌的作用域","nofollow","noopener","noreferrer","_blank","无名の窝",10000,"青春猪头-牧之原翔子-江之岛","OAuth2.0协议","2019-11-11T00:00:00.000Z","root","#%E5%89%8D%E8%A8%80","貌似我许久以前去尝试去看过OAuth2.0的东西，但看了一下这么鬼复杂，又这个请求那个请求，这个token那个token，哪用得着这么复杂~~（看不懂才对）~~，然后就放弃了。","客户端向服务商注册","授权码模式（authorization code）","隐藏模式（implicit）","密码模式（resource owner password credentials）","客户端模式（client credentials）","资源所有者通过用户代理访问客户端，客户端重定向授权服务器的授权页面给用户代理","资源所有者通过授权页面通知授权服务器给某客户端授权","response_type","redirect_uri","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","access_token","令牌类型，常见有 bearer\u002Fmac\u002Ftoken（可自定义）","失效时间","refresh_token","刷新令牌，用来刷新 access_token","{ \n  \"access_token\"  : \"...\",\n  \"token_type\"    : \"...\",\n  \"expires_in\"    : \"...\",\n  \"refresh_token\" : \"...\",\n}\n","和","\u002F协议\u002F20191111","2019-11-11")));