__NUXT_JSONP__("/archive/0", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av,aw,ax,ay,az,aA,aB,aC,aD,aE,aF,aG,aH,aI,aJ,aK,aL,aM,aN,aO,aP,aQ,aR,aS,aT,aU,aV,aW,aX,aY,aZ,a_,a$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp){return {data:[{siteConfig:{siteName:"无名の窝",siteHost:"https:\u002F\u002Fcellargalaxy.github.io",basePath:"\u002Fblog-code\u002F",navs:[{text:"文章",url:aD},{text:"归档",url:"\u002Fblog-code\u002Farchive\u002F0\u002F"},{text:"画画",url:"\u002Fblog-code\u002Fhtml\u002Fhua.html"},{text:"开源",url:"\u002Fblog-code\u002Fhttps:\u002Fgithub.com\u002Fcellargalaxy\u002Fblog-vue"}],pageSize:10,urlReplace:{"^/file/blog/code":"http:\u002F\u002F123.207.79.108\u002Ffile\u002Ffile\u002Fblog\u002Fcode"},backgroundImage:{duration:aE,fade:1000,images:[{url:"https:\u002F\u002Fi.loli.net\u002F2020\u002F01\u002F25\u002FcofTzDQXitjeVZ6.jpg",description:aF,type:N},{url:"https:\u002F\u002Fi.loli.net\u002F2020\u002F01\u002F25\u002FsfaRJ2lVeM3NDbE.jpg",description:aF,type:N},{url:"https:\u002F\u002Fi.loli.net\u002F2020\u002F01\u002F26\u002FKybiTdftam5Su7x.jpg",description:"青春猪头-双葉理央",type:N},{url:"https:\u002F\u002Fi.loli.net\u002F2020\u002F09\u002F08\u002FxdX73nfs24qgOYk.jpg",description:"京吹-明日香,久美子",type:N},{url:"https:\u002F\u002Fi.loli.net\u002F2020\u002F02\u002F14\u002FMAiruNcEFW2HYtg.jpg",description:"终将成为你-七海灯子,小糸侑",type:N},{url:"https:\u002F\u002Fi.loli.net\u002F2020\u002F02\u002F05\u002FEojdAxTDJsFpbPw.jpg",description:"玉子市场-北白川玉子",type:N},{url:"https:\u002F\u002Fi.loli.net\u002F2020\u002F01\u002F31\u002FAXxwJDRS9fmN2uU.jpg",description:"fate_hf-弓道馆",type:N},{url:"https:\u002F\u002Fi.loli.net\u002F2020\u002F02\u002F01\u002FaHhVObpJus6dnM4.jpg",description:"fate_hf-樱花树",type:N}]}},homeConfig:{brandInterval:aE,brands:[{imageUrl:"https:\u002F\u002Fi.loli.net\u002F2020\u002F01\u002F21\u002FmMEAnwY5XPC2pFb.jpg",title:"日常",texts:["我们所度过的每个平凡的日常，也许就是连续不断发生的奇迹。","日々、私たちが過ごしている日常は、実は奇跡の連続なのかもしれない。"]},{imageUrl:"https:\u002F\u002Fi.loli.net\u002F2020\u002F04\u002F19\u002FH1MmXb9xPcYEhT2.jpg",title:"昨日之歌",texts:["时间梭梭箭如飞，人道漫漫步蹒跚","人間そんな変わるもんじゃないのに、月日ばっかどんどん過ぎて"]}],navs:[{text:"Github",url:"https:\u002F\u002Fgithub.com\u002Fcellargalaxy\u002F"}]},pageFootConfig:{lines:[[{text:"Copyright © 2017-? ."},{text:"备案？不存在的"},{text:"Powered by Nuxt.js & Github"}]]},buildTime:new Date(1652943850852),startPage:2018,endPage:aG,currentPage:aG,files:[{slug:aH,description:"夜深，好困，长话短说。\n\nloki：存储查询日志的服务，对外提供一个http端口\npromtail：收集日志，把日志发生到loki里进行管理\ngrafana：可以通过loki的接口查询日志\n",createdAt:aI,updatedAt:aI,toc:[],body:{type:O,children:[{type:b,tag:h,props:{},children:[{type:a,value:aJ}]},{type:a,value:e},{type:b,tag:J,props:{},children:[{type:a,value:e},{type:b,tag:j,props:{},children:[{type:a,value:aK}]},{type:a,value:e},{type:b,tag:j,props:{},children:[{type:a,value:aL}]},{type:a,value:e},{type:b,tag:j,props:{},children:[{type:a,value:aM}]},{type:a,value:e}]},{type:a,value:e},{type:a,value:e},{type:b,tag:x,props:{id:aN},children:[{type:b,tag:g,props:{href:"#%E9%A2%84%E5%A4%87%E5%B7%A5%E4%BD%9C",ariaHidden:r,tabIndex:s},children:[{type:b,tag:c,props:{className:[t,u]},children:[]}]},{type:a,value:aN}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"loki的http端口需要对外，但loki的http貌似没权限校验功能，所以用caddy反代置于，加个账号密码校验。"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"caddy的配置，使用basicauth加上账号密码校验。admin就是账号，后面的是密码的hash base64。 这个hash base64需要使用caddy来生成，执行"},{type:b,tag:m,props:{},children:[{type:a,value:"caddy hash-password"}]},{type:a,value:"\n，输入两次密码，就能生成。"}]},{type:a,value:e},{type:b,tag:C,props:{className:[D]},children:[{type:b,tag:E,props:{className:[F,ac]},children:[{type:b,tag:m,props:{},children:[{type:a,value:":80 "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:at}]},{type:a,value:"\n  encode "},{type:b,tag:c,props:{className:[d,K]},children:[{type:a,value:"gzip"}]},{type:a,value:" zstd\n  \n  route \u002Floki\u002F* "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:at}]},{type:a,value:"\n    uri strip_prefix \u002Floki\n    reverse_proxy "},{type:b,tag:c,props:{className:[d,G]},children:[{type:a,value:"127.0"}]},{type:a,value:".0.1:3100\n  "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:au}]},{type:a,value:"\n    \n  basicauth \u002Floki\u002F* "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:at}]},{type:a,value:"\n    admin JDJhJDE0JEZDN1Q0ZjZwc2ZrbG1FODROdndmc09UZzRJWW41c2QyaFB0aUFnSUhwL3JZWVRob1FabWV1\n  "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:au}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:au}]},{type:a,value:e}]}]}]},{type:a,value:e},{type:b,tag:x,props:{id:aO},children:[{type:b,tag:g,props:{href:"#grafana",ariaHidden:r,tabIndex:s},children:[{type:b,tag:c,props:{className:[t,u]},children:[]}]},{type:a,value:aO}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"grafana没啥要求的，docker直接安装就好"}]},{type:a,value:e},{type:b,tag:C,props:{className:[D]},children:[{type:b,tag:E,props:{className:[F,ac]},children:[{type:b,tag:m,props:{},children:[{type:b,tag:c,props:{className:[d,K]},children:[{type:a,value:ad}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,K]},children:[{type:a,value:ae}]},{type:a,value:" volume create grafana_data\n"},{type:b,tag:c,props:{className:[d,K]},children:[{type:a,value:ad}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,K]},children:[{type:a,value:ae}]},{type:a,value:av},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:y}]},{type:a,value:aw},{type:b,tag:c,props:{className:[d,$]},children:[{type:a,value:V}]},{type:a,value:ax},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:y}]},{type:a,value:"\n  --name grafana "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:y}]},{type:a,value:aP},{type:b,tag:c,props:{className:[d,G]},children:[{type:a,value:"3000"}]},{type:a,value:":3000 "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:y}]},{type:a,value:"\n  -v grafana_data:\u002Fvar\u002Flib\u002Fgrafana "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:y}]},{type:a,value:"\n  grafana\u002Fgrafana\n"}]}]}]},{type:a,value:e},{type:b,tag:x,props:{id:aQ},children:[{type:b,tag:g,props:{href:"#loki",ariaHidden:r,tabIndex:s},children:[{type:b,tag:c,props:{className:[t,u]},children:[]}]},{type:a,value:aQ}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"配置文件，加了注释的可以按需改改，其余的都是官方默认配置。"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"官方配置："},{type:b,tag:g,props:{href:aR,rel:[n,o,p],target:q},children:[{type:a,value:aR}]}]},{type:a,value:e},{type:b,tag:C,props:{className:[D]},children:[{type:b,tag:E,props:{className:[F,aS]},children:[{type:b,tag:m,props:{},children:[{type:b,tag:c,props:{className:[d,k,l]},children:[{type:a,value:"auth_enabled"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,ay,af]},children:[{type:a,value:"false"}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,k,l]},children:[{type:a,value:aT}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,k,l]},children:[{type:a,value:aU}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,G]},children:[{type:a,value:aV}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,k,l]},children:[{type:a,value:aW}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,G]},children:[{type:a,value:"9096"}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,k,l]},children:[{type:a,value:"common"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,k,l]},children:[{type:a,value:"path_prefix"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:" \u002Ftmp\u002Floki\n  "},{type:b,tag:c,props:{className:[d,k,l]},children:[{type:a,value:"storage"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:L},{type:b,tag:c,props:{className:[d,k,l]},children:[{type:a,value:"filesystem"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:R},{type:b,tag:c,props:{className:[d,k,l]},children:[{type:a,value:"chunks_directory"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:" \u002Ftmp\u002Floki\u002Fchunks\n      "},{type:b,tag:c,props:{className:[d,k,l]},children:[{type:a,value:"rules_directory"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:" \u002Ftmp\u002Floki\u002Frules\n  "},{type:b,tag:c,props:{className:[d,k,l]},children:[{type:a,value:"replication_factor"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,G]},children:[{type:a,value:"1"}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,k,l]},children:[{type:a,value:"ring"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:L},{type:b,tag:c,props:{className:[d,k,l]},children:[{type:a,value:"instance_addr"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:" 127.0.0.1\n    "},{type:b,tag:c,props:{className:[d,k,l]},children:[{type:a,value:"kvstore"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:R},{type:b,tag:c,props:{className:[d,k,l]},children:[{type:a,value:aX}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:" inmemory\n\n"},{type:b,tag:c,props:{className:[d,k,l]},children:[{type:a,value:"schema_config"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,k,l]},children:[{type:a,value:"configs"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:L},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,k,l]},children:[{type:a,value:"from"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,"datetime",G]},children:[{type:a,value:"2020-10-24"}]},{type:a,value:R},{type:b,tag:c,props:{className:[d,k,l]},children:[{type:a,value:aX}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:" boltdb"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:"shipper\n      "},{type:b,tag:c,props:{className:[d,k,l]},children:[{type:a,value:"object_store"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:" filesystem\n      "},{type:b,tag:c,props:{className:[d,k,l]},children:[{type:a,value:"schema"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:" v11\n      "},{type:b,tag:c,props:{className:[d,k,l]},children:[{type:a,value:"index"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:az},{type:b,tag:c,props:{className:[d,k,l]},children:[{type:a,value:"prefix"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:" index_\n        "},{type:b,tag:c,props:{className:[d,k,l]},children:[{type:a,value:"period"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:" 24h\n\n"},{type:b,tag:c,props:{className:[d,k,l]},children:[{type:a,value:"ruler"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,k,l]},children:[{type:a,value:"alertmanager_url"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:aY},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:"\u002F\u002Flocalhost"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,G]},children:[{type:a,value:"9093"}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,k,l]},children:[{type:a,value:"limits_config"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,k,l]},children:[{type:a,value:"reject_old_samples"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,ay,af]},children:[{type:a,value:r}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,S]},children:[{type:a,value:"#是否拒绝旧样本"}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,k,l]},children:[{type:a,value:"reject_old_samples_max_age"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:aZ},{type:b,tag:c,props:{className:[d,S]},children:[{type:a,value:"#30d,默认168h(7d),之前的样本被拒绝"}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,k,l]},children:[{type:a,value:"ingestion_rate_mb"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,G]},children:[{type:a,value:"32"}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,S]},children:[{type:a,value:"#每用户每秒样本大小的摄取速率限制。单位为 MB"}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,k,l]},children:[{type:a,value:"max_entries_limit_per_query"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,G]},children:[{type:a,value:"10000"}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,S]},children:[{type:a,value:"#默认5000,最大查询行数"}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,k,l]},children:[{type:a,value:"table_manager"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,k,l]},children:[{type:a,value:"retention_deletes_enabled"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,ay,af]},children:[{type:a,value:r}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,S]},children:[{type:a,value:"#开启删除"}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,k,l]},children:[{type:a,value:"retention_period"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:aZ},{type:b,tag:c,props:{className:[d,S]},children:[{type:a,value:"#30d,默认744h(31d),超过的数据将被删除"}]},{type:a,value:e}]}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:a_}]},{type:a,value:e},{type:b,tag:C,props:{className:[D]},children:[{type:b,tag:E,props:{className:[F,ac]},children:[{type:b,tag:m,props:{},children:[{type:b,tag:c,props:{className:[d,K]},children:[{type:a,value:ad}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,K]},children:[{type:a,value:ae}]},{type:a,value:av},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:y}]},{type:a,value:aw},{type:b,tag:c,props:{className:[d,$]},children:[{type:a,value:V}]},{type:a,value:ax},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:y}]},{type:a,value:"\n  --name loki "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:y}]},{type:a,value:aP},{type:b,tag:c,props:{className:[d,G]},children:[{type:a,value:aV}]},{type:a,value:":3100 "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:y}]},{type:a,value:"\n  -v \u002Fconfig:\u002Fconfig "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:y}]},{type:a,value:"\n  grafana\u002Floki "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:y}]},{type:a,value:a$},{type:b,tag:c,props:{className:[d,$]},children:[{type:a,value:V}]},{type:a,value:"\u002Fconfig\u002Floki.yaml\n"}]}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"安装完之后可以进"},{type:b,tag:m,props:{},children:[{type:a,value:"http:\u002F\u002F127.0.0.1:3100\u002Floki\u002Fready"}]},{type:a,value:"。一开始会线上要等等，还没ready。等个一会就会显示ready了。"}]},{type:a,value:e},{type:b,tag:x,props:{id:ba},children:[{type:b,tag:g,props:{href:"#promtail",ariaHidden:r,tabIndex:s},children:[{type:b,tag:c,props:{className:[t,u]},children:[]}]},{type:a,value:ba}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"配置文件，官方配置："},{type:b,tag:g,props:{href:bb,rel:[n,o,p],target:q},children:[{type:a,value:bb}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:b,tag:m,props:{},children:[{type:a,value:"\u002Flog\u002F*log"}]},{type:a,value:"，promtail会抓取\u002Flog下面全面log结尾的文件"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"启动之后可以看看日志，如果发现请求loki被拒绝，报429，可能是promtail给loki一口气发送的日志过大。可以修改loki的速率限制配置。"}]},{type:a,value:e},{type:b,tag:C,props:{className:[D]},children:[{type:b,tag:E,props:{className:[F,aS]},children:[{type:b,tag:m,props:{},children:[{type:b,tag:c,props:{className:[d,k,l]},children:[{type:a,value:aT}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,k,l]},children:[{type:a,value:aU}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,G]},children:[{type:a,value:"9080"}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,k,l]},children:[{type:a,value:aW}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,G]},children:[{type:a,value:"0"}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,k,l]},children:[{type:a,value:"positions"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,k,l]},children:[{type:a,value:"filename"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:" \u002Ftmp\u002Fpositions.yaml\n\n"},{type:b,tag:c,props:{className:[d,k,l]},children:[{type:a,value:"client"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,k,l]},children:[{type:a,value:"url"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:aY},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:"\u002F\u002F127.0.0.1"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:"3100\u002Floki\u002Fapi\u002Fv1\u002Fpush\n  "},{type:b,tag:c,props:{className:[d,k,l]},children:[{type:a,value:"basic_auth"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:L},{type:b,tag:c,props:{className:[d,k,l]},children:[{type:a,value:"username"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:" username\n    "},{type:b,tag:c,props:{className:[d,k,l]},children:[{type:a,value:"password"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:" password\n\n"},{type:b,tag:c,props:{className:[d,k,l]},children:[{type:a,value:"scrape_configs"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,k,l]},children:[{type:a,value:"job_name"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:" log\n    "},{type:b,tag:c,props:{className:[d,k,l]},children:[{type:a,value:"static_configs"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:R},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,k,l]},children:[{type:a,value:"targets"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:M},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:" localhost\n        "},{type:b,tag:c,props:{className:[d,k,l]},children:[{type:a,value:bc}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:M},{type:b,tag:c,props:{className:[d,k,l]},children:[{type:a,value:"job"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:" log\n          "},{type:b,tag:c,props:{className:[d,k,l]},children:[{type:a,value:"__path__"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:" \u002Flog\u002F"},{type:b,tag:c,props:{className:[d,af]},children:[{type:a,value:"**\u002F*.log"}]},{type:a,value:L},{type:b,tag:c,props:{className:[d,k,l]},children:[{type:a,value:"pipeline_stages"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:R},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,k,l]},children:[{type:a,value:"regex"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,S]},children:[{type:a,value:"#https:\u002F\u002Fregex101.com\u002F"}]},{type:a,value:M},{type:b,tag:c,props:{className:[d,k,l]},children:[{type:a,value:"expression"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,"string"]},children:[{type:a,value:"'(?P\u003Ctimestamp\u003E\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\+\\d{2}:\\d{2}).+\\[(?P\u003Clevel\u003E[A-Z]{4})\\].+\\[logid:(?P\u003Clogid\u003E[0-9]+)\\].+\\[sn:(?P\u003Csn\u003E.+)\\].+\\[ip:(?P\u003Cip\u003E[0-9.]+)\\].+\\[caller:\"(?P\u003Ccaller\u003E.+)\"\\]'"}]},{type:a,value:R},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,k,l]},children:[{type:a,value:bc}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:M},{type:b,tag:c,props:{className:[d,k,l]},children:[{type:a,value:"level"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:M},{type:b,tag:c,props:{className:[d,k,l]},children:[{type:a,value:"logid"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:M},{type:b,tag:c,props:{className:[d,k,l]},children:[{type:a,value:"sn"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:M},{type:b,tag:c,props:{className:[d,k,l]},children:[{type:a,value:"ip"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:M},{type:b,tag:c,props:{className:[d,k,l]},children:[{type:a,value:"caller"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:R},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,k,l]},children:[{type:a,value:"timestamp"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:M},{type:b,tag:c,props:{className:[d,k,l]},children:[{type:a,value:"source"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:" timestamp\n          "},{type:b,tag:c,props:{className:[d,k,l]},children:[{type:a,value:"format"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:" RFC3339\n"}]}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:a_}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"加有日志文件的文件夹挂载到容器内的\u002Flog里。"}]},{type:a,value:e},{type:b,tag:C,props:{className:[D]},children:[{type:b,tag:E,props:{className:[F,ac]},children:[{type:b,tag:m,props:{},children:[{type:b,tag:c,props:{className:[d,K]},children:[{type:a,value:ad}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,K]},children:[{type:a,value:ae}]},{type:a,value:av},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:y}]},{type:a,value:aw},{type:b,tag:c,props:{className:[d,$]},children:[{type:a,value:V}]},{type:a,value:ax},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:y}]},{type:a,value:"\n  --name promtail "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:y}]},{type:a,value:"\n  -v log:\u002Flog "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:y}]},{type:a,value:"\n  -v \u002Fconfig.yml:\u002Fconfig.yml "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:y}]},{type:a,value:"\n  grafana\u002Fpromtail "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:y}]},{type:a,value:a$},{type:b,tag:c,props:{className:[d,$]},children:[{type:a,value:V}]},{type:a,value:"\u002Fconfig.yml\n"}]}]}]},{type:a,value:e},{type:b,tag:x,props:{id:bd},children:[{type:b,tag:g,props:{href:"#%E6%9F%A5%E8%AF%A2",ariaHidden:r,tabIndex:s},children:[{type:b,tag:c,props:{className:[t,u]},children:[]}]},{type:a,value:bd}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"在grafana的左边菜单里找到"},{type:b,tag:m,props:{},children:[{type:a,value:"Configuration"}]},{type:a,value:"，在配置里添加数据源。\n按理数据源的列表有loki可以选。URL填上"},{type:b,tag:m,props:{},children:[{type:a,value:"http:\u002F\u002F127.0.0.1:3100\u002Floki"}]},{type:a,value:"。有账号密码就在"},{type:b,tag:m,props:{},children:[{type:a,value:"Basic auth"}]},{type:a,value:"里填一下。保存测试。"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"左侧菜单里去到"},{type:b,tag:m,props:{},children:[{type:a,value:"Explore"}]},{type:a,value:"，点一下"},{type:b,tag:m,props:{},children:[{type:a,value:"Log browser"}]},{type:a,value:"，正常的话就有日志文件和任务名称可以选。\n所谓的任务名称，是promtail配置里的"},{type:b,tag:m,props:{},children:[{type:a,value:"scrape_configs.static_configs.labels.job"}]},{type:a,value:"那一项。"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"查询logid："},{type:b,tag:m,props:{},children:[{type:a,value:"{job=\"log\"} |= \"211016031700537788\""}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:be}]},{type:a,value:e},{type:b,tag:J,props:{},children:[{type:a,value:e},{type:b,tag:j,props:{},children:[{type:b,tag:g,props:{href:"https:\u002F\u002Fgrafana.com\u002Fdocs\u002Floki\u002Flatest\u002Finstallation\u002Fdocker\u002F",rel:[n,o,p],target:q},children:[{type:a,value:"官方安装教程"}]}]},{type:a,value:e},{type:b,tag:j,props:{},children:[{type:b,tag:g,props:{href:"https:\u002F\u002Fjoelei.com\u002F2021\u002F06\u002Flightweight-log-system-loki-experience\u002F",rel:[n,o,p],target:q},children:[{type:a,value:"轻量级的日志系统Loki体验"}]}]},{type:a,value:e},{type:b,tag:j,props:{},children:[{type:b,tag:g,props:{href:"https:\u002F\u002Fxiaosongs.com\u002Foperation\u002Floki\u002F",rel:[n,o,p],target:q},children:[{type:a,value:"Loki 轻量级日志收集系统"}]}]},{type:a,value:e},{type:b,tag:j,props:{},children:[{type:b,tag:g,props:{href:"https:\u002F\u002Fwww.feiyiblog.com\u002F2021\u002F09\u002F16\u002F%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%E4%B8%ADLoki%E7%9A%84%E4%BC%98%E5%8C%96\u002F",rel:[n,o,p],target:q},children:[{type:a,value:"生产环境中Loki的优化"}]}]},{type:a,value:e},{type:b,tag:j,props:{},children:[{type:b,tag:g,props:{href:"https:\u002F\u002Fwww.yoyoask.com\u002F?p=4436",rel:[n,o,p],target:q},children:[{type:a,value:"Loki、promtail、Grafana、Prometheus日志监控安装与配置"}]}]},{type:a,value:e}]}]},excerpt:{type:O,children:[{type:b,tag:h,props:{},children:[{type:a,value:aJ}]},{type:a,value:e},{type:b,tag:J,props:{},children:[{type:a,value:e},{type:b,tag:j,props:{},children:[{type:a,value:aK}]},{type:a,value:e},{type:b,tag:j,props:{},children:[{type:a,value:aL}]},{type:a,value:e},{type:b,tag:j,props:{},children:[{type:a,value:aM}]},{type:a,value:e}]}]},dir:bf,path:"\u002F折腾\u002F20220116\u002Fgrafana+loki+promtail搭建轻量日志系统",extension:W,title:aH,url:"\u002Fblog-code\u002Fview\u002F$E6$8A$98$E8$85$BE\u002F20220116\u002Fgrafana+loki+promtail$E6$90$AD$E5$BB$BA$E8$BD$BB$E9$87$8F$E6$97$A5$E5$BF$97$E7$B3$BB$E7$BB$9F\u002F",createAt:new Date(1642291200000),updateAt:new Date(1642291200000),attributes:[{name:X,value:bg},{name:Y,value:bg},{name:Z,value:bf,url:"\u002Fblog-code\u002Fpage\u002F$E6$8A$98$E8$85$BE\u002F20220116\u002F1\u002F"}]},{slug:bh,description:aA,createdAt:"2022-03-04T00:00:00.000Z",updatedAt:"2022-03-07T00:00:00.000Z",toc:[{id:bi,depth:H,text:bj},{id:ag,depth:H,text:ag},{id:bk,depth:H,text:bl},{id:bm,depth:3,text:bn},{id:ah,depth:H,text:ah},{id:ai,depth:H,text:ai},{id:bo,depth:H,text:bp}],body:{type:O,children:[{type:b,tag:h,props:{},children:[{type:a,value:aA}]},{type:a,value:e},{type:a,value:e},{type:b,tag:x,props:{id:"lsm树的实现"},children:[{type:b,tag:g,props:{href:"#lsm%E6%A0%91%E7%9A%84%E5%AE%9E%E7%8E%B0",ariaHidden:r,tabIndex:s},children:[{type:b,tag:c,props:{className:[t,u]},children:[]}]},{type:a,value:"LSM树的实现"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"RocksDB的LSM树的存储结构有三种：WAL+mentable+SSTable"}]},{type:a,value:e},{type:b,tag:I,props:{id:bi},children:[{type:b,tag:g,props:{href:"#wal",ariaHidden:r,tabIndex:s},children:[{type:b,tag:c,props:{className:[t,u]},children:[]}]},{type:a,value:bj}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"WAL(write-ahead log)(预写式日志)，WAL本质是一个追加写入的硬盘文件，是数据库技术中实现事务的一种标准方法，可以实现单机事务的原子性和持久性，同时提高写入的性能。\n在修改数据时为了实现事务的原子性和持久性，并不会直接修改数据文件，因为一个事务中可能会随机修改多个字段，导致需要修改数据文件的位置也是随机的。\n一是随机IO会影响性能，二是多次的随机IO写入显然无法保证原子性。\n而使用WAL的话，并不会直接去修改数据文件，而是把数据修改的情况都写入WAL里。往WAL里写入的类型有两种，redo执行写操作，undo回滚写操作。\n接下来可能会有五种情况："}]},{type:a,value:e},{type:b,tag:J,props:{},children:[{type:a,value:e},{type:b,tag:j,props:{},children:[{type:a,value:"往WAL写入redo前崩溃了，重启后WAL并没有相关日志：事务无执行，数据文件无影响"}]},{type:a,value:e},{type:b,tag:j,props:{},children:[{type:a,value:"往WAL写入redo时崩溃了，重启后WAL的日志并不完整：事务取消执行，数据文件无影响"}]},{type:a,value:e},{type:b,tag:j,props:{},children:[{type:a,value:"往WAL写入redo后崩溃了，重启后WAL的日志写入完整：从WAL中读出所需修改的数据，修改数据文件"}]},{type:a,value:e},{type:b,tag:j,props:{},children:[{type:a,value:"修改数据文件时崩溃了：从WAL中读出所需修改的数据，继续修改数据文件"}]},{type:a,value:e},{type:b,tag:j,props:{},children:[{type:a,value:"修改数据文件无法进行：往WAL里写入undo，回滚写操作，事务执行失败"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"使用WAL支持并发读读和读写，由于都是追加写入，不支持并发写写。\n如果需要读最新的数据，则需要往WAL里查询。如果WAL没查到，那数据文件里的就是最新的数据。\n需要注意，写入WAL与修改数据文件并不一定是同步的。往往会合并WAL多个写操作，批量刷入硬盘里。"}]},{type:a,value:e},{type:b,tag:I,props:{id:ag},children:[{type:b,tag:g,props:{href:"#mentable",ariaHidden:r,tabIndex:s},children:[{type:b,tag:c,props:{className:[t,u]},children:[]}]},{type:a,value:ag}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"mentable是RocksDB的内存数据结构，使用跳表实现，分为active memtable和immutable memtable两种。\nRocksDB在写入WAL之后，会把数据写到active mentable里。\n如果active mentable被写满，会新建一个active mentable，旧的会变成immutable memtable，等待被异步刷入硬盘里。"}]},{type:a,value:e},{type:b,tag:I,props:{id:bk},children:[{type:b,tag:g,props:{href:"#sstable",ariaHidden:r,tabIndex:s},children:[{type:b,tag:c,props:{className:[t,u]},children:[]}]},{type:a,value:bl}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"SSTable，SST文件，全称Sorted String Table，是持久化的，不可改的，有序的数据文件。\nSSTable的文件分为多个区域，内部有索引信息能加快数据查询速度。\nmentable被刷到硬盘里的数据去向就是生成SSTable。\nSST文件都属于某一个层，从L0到Ln，层级越小，数据越新。新生成的SST文件首先会在L0层，但每一层的SST文件数量会有限制。在一定的条件下，会对SST文件进行合并。"}]},{type:a,value:e},{type:b,tag:aj,props:{id:bm},children:[{type:b,tag:g,props:{href:"#compaction",ariaHidden:r,tabIndex:s},children:[{type:b,tag:c,props:{className:[t,u]},children:[]}]},{type:a,value:bn}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"由于RocksDB通过增量写写入mentable，而SST文件数据来源于mentable，所以SST文件的数据的冗余的。\n为了减少冗余，会对SST文件进行合并，删除重复或者过期的key。\n而RocksDB默认是使用Level Style Compaction作为合并策略。"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"首先L0的SST文件是从mentable生成的，所以L0的SST文件直接会有重复的key。\n当进行合并时，会选择Ln层的一个文件，与Ln+1的多个文件进行合并，合并相同的key，删除失效key。\n合并后，每一层的SST文件直接都是有顺序的。"}]},{type:a,value:e},{type:b,tag:I,props:{id:ah},children:[{type:b,tag:g,props:{href:"#%E8%AF%BB%E6%93%8D%E4%BD%9C",ariaHidden:r,tabIndex:s},children:[{type:b,tag:c,props:{className:[t,u]},children:[]}]},{type:a,value:ah}]},{type:a,value:e},{type:b,tag:_,props:{},children:[{type:a,value:e},{type:b,tag:j,props:{},children:[{type:a,value:"在active mentable里查询"}]},{type:a,value:e},{type:b,tag:j,props:{},children:[{type:a,value:"在immutable memtable里查询"}]},{type:a,value:e},{type:b,tag:j,props:{},children:[{type:a,value:"在L0里查询。由于L0可能有重复key，所以才有遍历查询"}]},{type:a,value:e},{type:b,tag:j,props:{},children:[{type:a,value:"在Ln里查询，由于Ln没有重复key，所以使用二分法查询"}]},{type:a,value:e},{type:b,tag:j,props:{},children:[{type:a,value:"如果到Lmax都还查不到，那就是查不到"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:I,props:{id:ai},children:[{type:b,tag:g,props:{href:"#%E5%86%99%E6%93%8D%E4%BD%9C",ariaHidden:r,tabIndex:s},children:[{type:b,tag:c,props:{className:[t,u]},children:[]}]},{type:a,value:ai}]},{type:a,value:e},{type:b,tag:_,props:{},children:[{type:a,value:e},{type:b,tag:j,props:{},children:[{type:a,value:"数据写入active mentable"}]},{type:a,value:e},{type:b,tag:j,props:{},children:[{type:a,value:"active mentable到达一定大小，会转变成immutable memtable，创建新的active mentable继续提供读写"}]},{type:a,value:e},{type:b,tag:j,props:{},children:[{type:a,value:"满足一定会把immutable memtable刷为硬盘的SST文件。先写入系统缓存页，再异步写入硬盘，考虑到系统奔溃丢缓存页可能性较低，异步写还是可靠的"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:I,props:{id:bo},children:[{type:b,tag:g,props:{href:"#column-family",ariaHidden:r,tabIndex:s},children:[{type:b,tag:c,props:{className:[t,u]},children:[]}]},{type:a,value:bp}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"kv存储时需要指定列族(Column Family)，且允许创建多个列族。列族直接使用不同的mentable和SST文件，但是公用一个WAL。\n好处是可以对不同列族的mentable和SST进行不同的配置，提高读写性能。"}]},{type:a,value:e},{type:b,tag:x,props:{id:"lsm树总结"},children:[{type:b,tag:g,props:{href:"#lsm%E6%A0%91%E6%80%BB%E7%BB%93",ariaHidden:r,tabIndex:s},children:[{type:b,tag:c,props:{className:[t,u]},children:[]}]},{type:a,value:"LSM树总结"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"相比于B+树来说，要在B+树写入随机的数据，写入的节点位置是随机的，随机写入影响着B+树的写入性能。\n而LSM树通过使用WAL，mentable和SST文件，将随机写转换为顺序写，大大提高了写入的性能。\n但顺序写的所带来的代价的空间放大，写放大和读放大。"}]},{type:a,value:e},{type:b,tag:J,props:{},children:[{type:a,value:e},{type:b,tag:j,props:{},children:[{type:a,value:"由于SST文件的冗余性，存储空间被放大"}]},{type:a,value:e},{type:b,tag:j,props:{},children:[{type:a,value:"同样由于冗余性而需要进行合并，每次合并都进行一次写操作，实际是把每次只需写入一次的数据放大操作了多次写"}]},{type:a,value:e},{type:b,tag:j,props:{},children:[{type:a,value:"LSM树读取数据需要分层读取多次，读取次数的放大会影响读性能"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"空间放大，写放大和读放大三种需要平衡，RocksDB提供了许多配置来进行微调设置。\n跟B+树相比，B+树对事物支持更好，因为B+树能原地更新数据，并且数据只有一份。而LSM树的key在L0里会重复，只有在进行合并的时候才算完成事物。\nLSM树支持O(1)的写，O(n)的读。而B+树的读写都是O(logN)。通常来说，LSM树的写性能由于B+树，B+树的读性能优于LSM树。"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:be}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:b,tag:g,props:{href:"https:\u002F\u002Fsegmentfault.com\u002Fa\u002F1190000041198407",rel:[n,o,p],target:q},children:[{type:a,value:"从 RocksDB 看 LSM-Tree 算法设计"}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:b,tag:g,props:{href:"https:\u002F\u002Fflynx.dev\u002Frocksdb\u002F",rel:[n,o,p],target:q},children:[{type:a,value:"一个项目的诞生(三)：RocksDB的价值"}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:b,tag:g,props:{href:"https:\u002F\u002Flessisbetter.site\u002F2020\u002F01\u002F02\u002Fwal-introduction\u002F",rel:[n,o,p],target:q},children:[{type:a,value:"WAL(预写式日志)简介"}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:b,tag:g,props:{href:"https:\u002F\u002Fcloud.tencent.com\u002Fdeveloper\u002Farticle\u002F1623123",rel:[n,o,p],target:q},children:[{type:a,value:"你常听说的WAL到底是什么"}]}]}]},excerpt:{type:O,children:[{type:b,tag:h,props:{},children:[{type:a,value:aA}]}]},dir:bq,path:"\u002F中间件\u002F20220304\u002FRocksDB初步了解",extension:W,title:bh,url:"\u002Fblog-code\u002Fview\u002F$E4$B8$AD$E9$97$B4$E4$BB$B6\u002F20220304\u002FRocksDB$E5$88$9D$E6$AD$A5$E4$BA$86$E8$A7$A3\u002F",createAt:new Date(1646352000000),updateAt:new Date(1646611200000),attributes:[{name:X,value:"2022-03-04"},{name:Y,value:"2022-03-07"},{name:Z,value:bq,url:"\u002Fblog-code\u002Fpage\u002F$E4$B8$AD$E9$97$B4$E4$BB$B6\u002F20220304\u002F1\u002F"}]},{slug:br,toc:[],body:{type:O,children:[{type:b,tag:h,props:{},children:[{type:a,value:"这是关于关于我的页面，一名底层搬砖的程序猿。"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"希望有一个自己喜欢的，漂漂亮亮的地方来记录各种东西，所以写了这个博客。当然你可能是在GitHub里看见这句话的，那欢迎光临"},{type:b,tag:g,props:{href:bs,rel:[n,o,p],target:q},children:[{type:a,value:bs}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"不知道写些什么好，就先到这里为止吧。"}]}]},dir:bt,path:"\u002FREADME",extension:W,createdAt:bu,updatedAt:bu,excerpt:ab,title:br,url:"\u002Fblog-code\u002Fview\u002FREADME\u002F",createAt:new Date(1652943761879),updateAt:new Date(1652943761879),attributes:[{name:X,value:Q},{name:Y,value:Q},{name:Z,value:bt,url:aD}]},{slug:bv,toc:[],body:{type:O,children:[{type:b,tag:x,props:{id:"oltp"},children:[{type:b,tag:g,props:{href:"#oltp",ariaHidden:r,tabIndex:s},children:[{type:b,tag:c,props:{className:[t,u]},children:[]}]},{type:a,value:"OLTP"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Online Transactional Processing，事务型数据库。"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"要求实时处理，响应速度快，保证事务的ACID。实际场景中，多会操作少数几行的多列数据，因此适用于行式存储。"}]},{type:a,value:e},{type:b,tag:x,props:{id:"olap"},children:[{type:b,tag:g,props:{href:"#olap",ariaHidden:r,tabIndex:s},children:[{type:b,tag:c,props:{className:[t,u]},children:[]}]},{type:a,value:"OLAP"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Online analytical processing：分析型数据库。"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"对查询速度要求不高，查询也并不频繁，操作多是查询，对修改需求不高。实际场景中，多会查询少数几列的多行数据，因此适用于列式存储。"}]},{type:a,value:e},{type:b,tag:x,props:{id:"htap"},children:[{type:b,tag:g,props:{href:"#htap",ariaHidden:r,tabIndex:s},children:[{type:b,tag:c,props:{className:[t,u]},children:[]}]},{type:a,value:"HTAP"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Hybrid Transactional\u002FAnalytical Processing：混合型数据库。"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"既能支持实时事务特性，也支持大量数据查询分析的性能，一般由三种实现方式。"}]},{type:a,value:e},{type:b,tag:_,props:{},children:[{type:a,value:e},{type:b,tag:j,props:{},children:[{type:a,value:"在应用层对OLTP和OLAP系统进行松耦合，OLTP和OLAP共享一份数据，通过ETL将OLTP的数据同步到OLAP，整体对外表现为HTAP。"}]},{type:a,value:e},{type:b,tag:j,props:{},children:[{type:a,value:"在数据库层分别使用行存储引擎和列存储引擎，分别负责OLTP和OLAP的功能。存储在物理上隔离，使用一定的协议进行数据同步。是主流的实现方案。"}]},{type:a,value:e},{type:b,tag:j,props:{},children:[{type:a,value:"使用但一次存储引擎，同时实现OLTP和OLAP。但无论是单使用行存储还是列存储，性能都无法达到较优。"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:bw}]},{type:a,value:e},{type:b,tag:J,props:{},children:[{type:a,value:e},{type:b,tag:j,props:{},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:b,tag:g,props:{href:bx,rel:[n,o,p],target:q},children:[{type:a,value:bx}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:j,props:{},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:b,tag:g,props:{href:by,rel:[n,o,p],target:q},children:[{type:a,value:by}]}]},{type:a,value:e}]},{type:a,value:e}]}]},dir:bz,path:"\u002F中间件\u002F20220428\u002FOLTP、OLAP与HTAP",extension:W,createdAt:bA,updatedAt:bA,excerpt:ab,title:bv,url:"\u002Fblog-code\u002Fview\u002F$E4$B8$AD$E9$97$B4$E4$BB$B6\u002F20220428\u002FOLTP$E3$80$81OLAP$E4$B8$8EHTAP\u002F",createAt:new Date(1652943761883),updateAt:new Date(1652943761883),attributes:[{name:X,value:Q},{name:Y,value:Q},{name:Z,value:bz,url:"\u002Fblog-code\u002Fpage\u002F$E4$B8$AD$E9$97$B4$E4$BB$B6\u002F20220428\u002F1\u002F"}]},{slug:bB,toc:[{id:ak,depth:H,text:ak},{id:al,depth:H,text:al},{id:am,depth:H,text:am}],body:{type:O,children:[{type:b,tag:x,props:{id:bC},children:[{type:b,tag:g,props:{href:"#%E5%89%8D%E6%9C%9F%E5%87%86%E5%A4%87",ariaHidden:r,tabIndex:s},children:[{type:b,tag:c,props:{className:[t,u]},children:[]}]},{type:a,value:bC}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"twrp刷入并不成功，目前不晓得啥原因。 但由于没有太需要twrp，所以就先放弃了。 可以直接调到刷rom那步。"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"我下载的都是最新的"}]},{type:a,value:e},{type:b,tag:I,props:{id:ak},children:[{type:b,tag:g,props:{href:"#rom%E4%B8%8B%E8%BD%BD",ariaHidden:r,tabIndex:s},children:[{type:b,tag:c,props:{className:[t,u]},children:[]}]},{type:a,value:ak}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"最新的版本貌似永远停留在2020年十二月了。"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:b,tag:g,props:{href:bD,rel:[n,o,p],target:q},children:[{type:a,value:bD}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"lineageos还有更新"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:b,tag:g,props:{href:bE,rel:[n,o,p],target:q},children:[{type:a,value:bE}]}]},{type:a,value:e},{type:b,tag:C,props:{className:[D]},children:[{type:b,tag:E,props:{className:[an,F]},children:[{type:b,tag:m,props:{},children:[{type:a,value:"taimen-rp1a.201005.004.a1-factory-2f5c4987.zip\n"}]}]}]},{type:a,value:e},{type:b,tag:I,props:{id:al},children:[{type:b,tag:g,props:{href:"#%E4%B8%8B%E8%BD%BDtwrp",ariaHidden:r,tabIndex:s},children:[{type:b,tag:c,props:{className:[t,u]},children:[]}]},{type:a,value:al}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"twrp起码到2022三月还有更新。"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:b,tag:g,props:{href:bF,rel:[n,o,p],target:q},children:[{type:a,value:bF}]}]},{type:a,value:e},{type:b,tag:C,props:{className:[D]},children:[{type:b,tag:E,props:{className:[an,F]},children:[{type:b,tag:m,props:{},children:[{type:a,value:"twrp-3.6.1_9-0-taimen.img\ntwrp-installer-3.6.1_9-0-taimen.zip\n"}]}]}]},{type:a,value:e},{type:b,tag:I,props:{id:am},children:[{type:b,tag:g,props:{href:"#%E4%B8%8B%E8%BD%BDfastboot",ariaHidden:r,tabIndex:s},children:[{type:b,tag:c,props:{className:[t,u]},children:[]}]},{type:a,value:am}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"ubuntu安装安卓的fastboot，在安装ROM时提示版本太低，还是去官网下载了个新的"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:b,tag:g,props:{href:bG,rel:[n,o,p],target:q},children:[{type:a,value:bG}]}]},{type:a,value:e},{type:b,tag:x,props:{id:bH},children:[{type:b,tag:g,props:{href:"#%E8%A7%A3%E9%94%81",ariaHidden:r,tabIndex:s},children:[{type:b,tag:c,props:{className:[t,u]},children:[]}]},{type:a,value:bH}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"待补充。我买到手已经是解锁了的，所以没操作"}]},{type:a,value:e},{type:b,tag:x,props:{id:bI},children:[{type:b,tag:g,props:{href:"#%E6%AD%A5%E9%AA%A4",ariaHidden:r,tabIndex:s},children:[{type:b,tag:c,props:{className:[t,u]},children:[]}]},{type:a,value:bI}]},{type:a,value:e},{type:b,tag:_,props:{},children:[{type:a,value:e},{type:b,tag:j,props:{},children:[{type:a,value:aB}]},{type:a,value:e},{type:b,tag:j,props:{},children:[{type:a,value:bJ}]},{type:a,value:e},{type:b,tag:j,props:{},children:[{type:a,value:aC}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:x,props:{id:aB},children:[{type:b,tag:g,props:{href:"#%E5%88%B7%E5%85%A5%E4%B8%B4%E6%97%B6twrp",ariaHidden:r,tabIndex:s},children:[{type:b,tag:c,props:{className:[t,u]},children:[]}]},{type:a,value:aB}]},{type:a,value:e},{type:b,tag:_,props:{},children:[{type:a,value:e},{type:b,tag:j,props:{},children:[{type:b,tag:m,props:{},children:[{type:a,value:"adb devices"}]},{type:a,value:"查看设备列表"}]},{type:a,value:e},{type:b,tag:j,props:{},children:[{type:a,value:"关机后同时按开机键和音量下键\u002F"},{type:b,tag:m,props:{},children:[{type:a,value:"adb reboot bootloader"}]},{type:a,value:"进入bootloader模式"}]},{type:a,value:e},{type:b,tag:j,props:{},children:[{type:b,tag:m,props:{},children:[{type:a,value:bK}]},{type:a,value:bL}]},{type:a,value:e},{type:b,tag:j,props:{},children:[{type:b,tag:m,props:{},children:[{type:a,value:"fastboot boot twrp-3.6.1_9-0-taimen.img"}]},{type:a,value:"刷入"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:x,props:{id:"刷入rom"},children:[{type:b,tag:g,props:{href:"#%E5%88%B7%E5%85%A5rom",ariaHidden:r,tabIndex:s},children:[{type:b,tag:c,props:{className:[t,u]},children:[]}]},{type:a,value:bJ}]},{type:a,value:e},{type:b,tag:_,props:{},children:[{type:a,value:e},{type:b,tag:j,props:{},children:[{type:a,value:"解压fastboot工具和rom"}]},{type:a,value:e},{type:b,tag:j,props:{},children:[{type:a,value:"将解压出来的fastboot文件夹里的全部文件拷贝一份到rom的文件夹里"}]},{type:a,value:e},{type:b,tag:j,props:{},children:[{type:a,value:"得把fastboot文件夹里全部文件都拷贝，会依赖到文件夹里其他文件，不然刷到中途会失败"}]},{type:a,value:e},{type:b,tag:j,props:{},children:[{type:a,value:"修改一下"},{type:b,tag:m,props:{},children:[{type:a,value:bM}]},{type:a,value:"，改成使用当前路径的fastboot"}]},{type:a,value:e},{type:b,tag:j,props:{},children:[{type:a,value:"手机进入fastboot模式"}]},{type:a,value:e},{type:b,tag:j,props:{},children:[{type:b,tag:m,props:{},children:[{type:a,value:bK}]},{type:a,value:bL}]},{type:a,value:e},{type:b,tag:j,props:{},children:[{type:a,value:"直接"},{type:b,tag:m,props:{},children:[{type:a,value:bM}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"或者"}]},{type:a,value:e},{type:b,tag:C,props:{className:[D]},children:[{type:b,tag:E,props:{className:[an,F]},children:[{type:b,tag:m,props:{},children:[{type:a,value:"adb sideload taimen-rp1a.201005.004.a1-factory-2f5c4987.zip\n"}]}]}]},{type:a,value:e},{type:b,tag:x,props:{id:aC},children:[{type:b,tag:g,props:{href:"#%E5%88%B7%E5%85%A5%E6%B0%B8%E4%B9%85twrp",ariaHidden:r,tabIndex:s},children:[{type:b,tag:c,props:{className:[t,u]},children:[]}]},{type:a,value:aC}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"选择高级 \u003E sideload进入sideload"}]},{type:a,value:e},{type:b,tag:C,props:{className:[D]},children:[{type:b,tag:E,props:{className:[an,F]},children:[{type:b,tag:m,props:{},children:[{type:a,value:"adb sideload twrp-installer-3.6.1_9-0-taimen.zip\n"}]}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"其他"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"这里主要说下进入recovery的方式：首先进入fastboot，然后通过音量键进入recovery，首次进入会看到一个\"no command\"的界面，当出现这个界面后需要长按power键，然后按一下音量up键，这样才能进入recovery模式；"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:bw}]},{type:a,value:e},{type:b,tag:J,props:{},children:[{type:a,value:e},{type:b,tag:j,props:{},children:[{type:b,tag:g,props:{href:bN,rel:[n,o,p],target:q},children:[{type:a,value:bN}]}]},{type:a,value:e},{type:b,tag:j,props:{},children:[{type:b,tag:g,props:{href:bO,rel:[n,o,p],target:q},children:[{type:a,value:bO}]}]},{type:a,value:e},{type:b,tag:j,props:{},children:[{type:b,tag:g,props:{href:bP,rel:[n,o,p],target:q},children:[{type:a,value:bP}]}]},{type:a,value:e},{type:b,tag:j,props:{},children:[{type:b,tag:g,props:{href:bQ,rel:[n,o,p],target:q},children:[{type:a,value:bQ}]}]},{type:a,value:e},{type:b,tag:j,props:{},children:[{type:b,tag:g,props:{href:ao,rel:[n,o,p],target:q},children:[{type:a,value:ao}]}]},{type:a,value:e},{type:b,tag:j,props:{},children:[{type:b,tag:g,props:{href:ao,rel:[n,o,p],target:q},children:[{type:a,value:ao}]}]},{type:a,value:e},{type:b,tag:j,props:{},children:[{type:b,tag:g,props:{href:bR,rel:[n,o,p],target:q},children:[{type:a,value:bR}]}]},{type:a,value:e},{type:b,tag:j,props:{},children:[{type:b,tag:g,props:{href:bS,rel:[n,o,p],target:q},children:[{type:a,value:bS}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"电信破解相关的"}]},{type:a,value:e},{type:b,tag:J,props:{},children:[{type:a,value:e},{type:b,tag:j,props:{},children:[{type:b,tag:g,props:{href:bT,rel:[n,o,p],target:q},children:[{type:a,value:bT}]}]},{type:a,value:e},{type:b,tag:j,props:{},children:[{type:b,tag:g,props:{href:bU,rel:[n,o,p],target:q},children:[{type:a,value:bU}]}]},{type:a,value:e},{type:b,tag:j,props:{},children:[{type:b,tag:g,props:{href:bV,rel:[n,o,p],target:q},children:[{type:a,value:bV}]}]},{type:a,value:e},{type:b,tag:j,props:{},children:[{type:b,tag:g,props:{href:bW,rel:[n,o,p],target:q},children:[{type:a,value:bW}]}]},{type:a,value:e},{type:b,tag:j,props:{},children:[{type:b,tag:g,props:{href:bX,rel:[n,o,p],target:q},children:[{type:a,value:bX}]}]},{type:a,value:e},{type:b,tag:j,props:{},children:[{type:b,tag:g,props:{href:bY,rel:[n,o,p],target:q},children:[{type:a,value:bY}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"无需root电信破解"}]},{type:a,value:e},{type:b,tag:J,props:{},children:[{type:a,value:e},{type:b,tag:j,props:{},children:[{type:b,tag:g,props:{href:bZ,rel:[n,o,p],target:q},children:[{type:a,value:bZ}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"一代的"}]},{type:a,value:e},{type:b,tag:J,props:{},children:[{type:a,value:e},{type:b,tag:j,props:{},children:[{type:b,tag:g,props:{href:b_,rel:[n,o,p],target:q},children:[{type:a,value:b_}]}]},{type:a,value:e},{type:b,tag:j,props:{},children:[{type:b,tag:g,props:{href:b$,rel:[n,o,p],target:q},children:[{type:a,value:b$}]}]},{type:a,value:e},{type:b,tag:j,props:{},children:[{type:b,tag:g,props:{href:ca,rel:[n,o,p],target:q},children:[{type:a,value:ca}]}]},{type:a,value:e},{type:b,tag:j,props:{},children:[{type:b,tag:g,props:{href:cb,rel:[n,o,p],target:q},children:[{type:a,value:cb}]}]},{type:a,value:e},{type:b,tag:j,props:{},children:[{type:b,tag:g,props:{href:cc,rel:[n,o,p],target:q},children:[{type:a,value:cc}]}]},{type:a,value:e}]}]},dir:cd,path:"\u002F折腾\u002F20220425\u002FPixel2xl刷机手记",extension:W,createdAt:ap,updatedAt:ap,excerpt:ab,title:bB,url:"\u002Fblog-code\u002Fview\u002F$E6$8A$98$E8$85$BE\u002F20220425\u002FPixel2xl$E5$88$B7$E6$9C$BA$E6$89$8B$E8$AE$B0\u002F",createAt:new Date(1652943761887),updateAt:new Date(1652943761887),attributes:[{name:X,value:Q},{name:Y,value:Q},{name:Z,value:cd,url:"\u002Fblog-code\u002Fpage\u002F$E6$8A$98$E8$85$BE\u002F20220425\u002F1\u002F"}]},{slug:ce,toc:[{id:aq,depth:H,text:aq},{id:ar,depth:H,text:ar}],body:{type:O,children:[{type:b,tag:x,props:{id:cf},children:[{type:b,tag:g,props:{href:"#%E9%9C%80%E6%B1%82%E8%83%8C%E6%99%AF",ariaHidden:r,tabIndex:s},children:[{type:b,tag:c,props:{className:[t,u]},children:[]}]},{type:a,value:cf}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"鄙人有多个谷歌账号，在不同的电脑里使用。\n时间一长，不同账号和电脑的书签就会产生差异，很容易丢书签。\n虽然chrome对同一个账号，能在不同电脑之间同步书签。\n但是如果有设备长时间未离线后同步，会出现把已经删掉的书签又加回去的情况。\n并且我希望书签能在多个账号直接保持同步。"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"其实找类似的功能的软件，没有一年也有半年了，始终无果。\n后来我意识到一个问题，不同账号的书签合并，跟合代码一样，是有可能发生冲突的，这个冲突显然没太多的办法进行自动处理。\n便最后还是决定自己写工具来手动定期合并书签罢。"}]},{type:a,value:e},{type:b,tag:x,props:{id:cg},children:[{type:b,tag:g,props:{href:"#chrome%E4%B9%A6%E7%AD%BE%E7%BB%93%E6%9E%84",ariaHidden:r,tabIndex:s},children:[{type:b,tag:c,props:{className:[t,u]},children:[]}]},{type:a,value:cg}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"从chrome导出的书签html其实只是个xml，折腾xml的结构折腾了好久。\n一是chrome的书签xml结构设计就不好解析，二是go的xml工具还是稀烂的。"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"结构式最核心的是"},{type:b,tag:m,props:{},children:[{type:a,value:B}]},{type:a,value:ch},{type:b,tag:m,props:{},children:[{type:a,value:B}]},{type:a,value:"标签有两种类型，分别是链接类型和文件夹类型。"}]},{type:a,value:e},{type:b,tag:I,props:{id:aq},children:[{type:b,tag:g,props:{href:"#%E9%93%BE%E6%8E%A5%E7%B1%BB%E5%9E%8B",ariaHidden:r,tabIndex:s},children:[{type:b,tag:c,props:{className:[t,u]},children:[]}]},{type:a,value:aq}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:b,tag:m,props:{},children:[{type:a,value:B}]},{type:a,value:"标签里面包住一个"},{type:b,tag:m,props:{},children:[{type:a,value:g}]},{type:a,value:ch},{type:b,tag:m,props:{},children:[{type:a,value:g}]},{type:a,value:"标签就是书签的具体信息。"}]},{type:a,value:e},{type:b,tag:C,props:{className:[D]},children:[{type:b,tag:E,props:{className:[ci,F]},children:[{type:b,tag:m,props:{},children:[{type:b,tag:c,props:{className:[d,w]},children:[{type:b,tag:c,props:{className:[d,w]},children:[{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:T}]},{type:a,value:B}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]}]},{type:a,value:L},{type:b,tag:c,props:{className:[d,w]},children:[{type:b,tag:c,props:{className:[d,w]},children:[{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:T}]},{type:a,value:g}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,"attr-name"]},children:[{type:a,value:"href"}]},{type:b,tag:c,props:{className:[d,"attr-value"]},children:[{type:b,tag:c,props:{className:[d,f,"attr-equals"]},children:[{type:a,value:V}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:cj}]},{type:a,value:"https:\u002F\u002Fwww.google.com\u002F"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:cj}]}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]}]},{type:a,value:"google"},{type:b,tag:c,props:{className:[d,w]},children:[{type:b,tag:c,props:{className:[d,w]},children:[{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:U}]},{type:a,value:g}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,w]},children:[{type:b,tag:c,props:{className:[d,w]},children:[{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:U}]},{type:a,value:B}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]}]},{type:a,value:e}]}]}]},{type:a,value:e},{type:b,tag:I,props:{id:ar},children:[{type:b,tag:g,props:{href:"#%E6%96%87%E4%BB%B6%E5%A4%B9%E7%B1%BB%E5%9E%8B",ariaHidden:r,tabIndex:s},children:[{type:b,tag:c,props:{className:[t,u]},children:[]}]},{type:a,value:ar}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"文件夹类型的"},{type:b,tag:m,props:{},children:[{type:a,value:B}]},{type:a,value:"标签里，直接子标签是没有"},{type:b,tag:m,props:{},children:[{type:a,value:g}]},{type:a,value:"标签的。\n而是第一个表示是"},{type:b,tag:m,props:{},children:[{type:a,value:aj}]},{type:a,value:"，记录这个文件夹的名称。\n然后再有一个"},{type:b,tag:m,props:{},children:[{type:a,value:as}]},{type:a,value:"标签，包含着文件夹里所包含的内容。\n文件夹里既可以包含链接也可以包含文件夹，所以在"},{type:b,tag:m,props:{},children:[{type:a,value:as}]},{type:a,value:"标签所包含的是多个"},{type:b,tag:m,props:{},children:[{type:a,value:B}]},{type:a,value:"标签。"}]},{type:a,value:e},{type:b,tag:C,props:{className:[D]},children:[{type:b,tag:E,props:{className:[ci,F]},children:[{type:b,tag:m,props:{},children:[{type:b,tag:c,props:{className:[d,w]},children:[{type:b,tag:c,props:{className:[d,w]},children:[{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:T}]},{type:a,value:B}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]}]},{type:a,value:L},{type:b,tag:c,props:{className:[d,w]},children:[{type:b,tag:c,props:{className:[d,w]},children:[{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:T}]},{type:a,value:aj}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]}]},{type:a,value:"搜索引擎"},{type:b,tag:c,props:{className:[d,w]},children:[{type:b,tag:c,props:{className:[d,w]},children:[{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:U}]},{type:a,value:aj}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]}]},{type:a,value:L},{type:b,tag:c,props:{className:[d,w]},children:[{type:b,tag:c,props:{className:[d,w]},children:[{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:T}]},{type:a,value:as}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]}]},{type:a,value:az},{type:b,tag:c,props:{className:[d,w]},children:[{type:b,tag:c,props:{className:[d,w]},children:[{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:T}]},{type:a,value:B}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]}]},{type:a,value:ck},{type:b,tag:c,props:{className:[d,w]},children:[{type:b,tag:c,props:{className:[d,w]},children:[{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:U}]},{type:a,value:B}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]}]},{type:a,value:az},{type:b,tag:c,props:{className:[d,w]},children:[{type:b,tag:c,props:{className:[d,w]},children:[{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:T}]},{type:a,value:B}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]}]},{type:a,value:ck},{type:b,tag:c,props:{className:[d,w]},children:[{type:b,tag:c,props:{className:[d,w]},children:[{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:U}]},{type:a,value:B}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]}]},{type:a,value:L},{type:b,tag:c,props:{className:[d,w]},children:[{type:b,tag:c,props:{className:[d,w]},children:[{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:U}]},{type:a,value:as}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,w]},children:[{type:b,tag:c,props:{className:[d,w]},children:[{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:U}]},{type:a,value:B}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]}]},{type:a,value:e}]}]}]},{type:a,value:e},{type:b,tag:x,props:{id:cl},children:[{type:b,tag:g,props:{href:"#%E4%B9%A6%E7%AD%BE%E8%A7%A3%E6%9E%90",ariaHidden:r,tabIndex:s},children:[{type:b,tag:c,props:{className:[t,u]},children:[]}]},{type:a,value:cl}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"书签的xml没有id和class，不能直接映射为结构体，书签也不闭合，还需要递归解析，添加了不少难度。\n经过了两天折腾，解析思路是把xml导到"},{type:b,tag:m,props:{},children:[{type:a,value:"github.com\u002FPuerkitoBio\u002Fgoquery"}]},{type:a,value:"当html解析。\n"},{type:b,tag:m,props:{},children:[{type:a,value:cm}]},{type:a,value:"会给xml外面自动包和html、head和body。\n然后"},{type:b,tag:m,props:{},children:[{type:a,value:cm}]},{type:a,value:"的选择器都以body绝对的开始标签，往后加定位标签。相当于用“绝对路径”而不是“相对路径”。\n一开始递归想用“相对路径”，但是翻遍github，go就没库能支持，浪费了很多时间。"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"详细看代码吧："},{type:b,tag:g,props:{href:cn,rel:[n,o,p],target:q},children:[{type:a,value:cn}]}]},{type:a,value:e},{type:b,tag:x,props:{id:co},children:[{type:b,tag:g,props:{href:"#%E4%BD%BF%E7%94%A8",ariaHidden:r,tabIndex:s},children:[{type:b,tag:c,props:{className:[t,u]},children:[]}]},{type:a,value:co}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"将xml转成csv，对全部书签进行排序，输出到csv文件保持到github上。\n排序的规则的，不考虑请求协议，将域名倒过来，后面再接上path。\n例如"},{type:b,tag:m,props:{},children:[{type:a,value:"https:\u002F\u002Fwww.google.com\u002Fa?b=c#d"}]},{type:a,value:" ，排序的key是 "},{type:b,tag:m,props:{},children:[{type:a,value:"moc.elgoog.www\u002Fa?b=c#d"}]},{type:a,value:"。\n能让域名相近或者二级三级域名的放在一起。\n通过github版本管理管理书签，github上的书签作为冷备份。\n需要使用时将csv转回xml，通过floccus来进行热同步。"}]}]},dir:cp,path:"\u002F折腾\u002F20220430\u002Fchrome书签合并脚本",extension:W,createdAt:ap,updatedAt:ap,excerpt:ab,title:ce,url:"\u002Fblog-code\u002Fview\u002F$E6$8A$98$E8$85$BE\u002F20220430\u002Fchrome$E4$B9$A6$E7$AD$BE$E5$90$88$E5$B9$B6$E8$84$9A$E6$9C$AC\u002F",createAt:new Date(1652943761887),updateAt:new Date(1652943761887),attributes:[{name:X,value:Q},{name:Y,value:Q},{name:Z,value:cp,url:"\u002Fblog-code\u002Fpage\u002F$E6$8A$98$E8$85$BE\u002F20220430\u002F1\u002F"}]}]}],fetch:{},mutations:ab}}("text","element","span","token","\n","punctuation","a","p",":","li","key","atrule","code","nofollow","noopener","noreferrer","_blank","true",-1,"icon","icon-link"," ","tag","h1","\\","\n  ","\u003E","dt","div","nuxt-content-highlight","pre","line-numbers","number",2,"h2","ul","function","\n    ","\n          ","wide","root","-","2022-05-19","\n      ","comment","\u003C","\u003C\u002F","=",".md","createAt","updateAt","sort","ol","operator","\n\n",void 0,"language-shell","sudo","docker","important","mentable","读操作","写操作","h3","rom下载","下载twrp","下载fastboot","language-text","https:\u002F\u002Fblog.csdn.net\u002Fweixin_45472158\u002Farticle\u002Fdetails\u002F108441357","2022-05-19T07:02:41.887Z","链接类型","文件夹类型","dl","{","}"," run -d ","\n  --restart","always ","boolean","\n        ","RocksDB是一个嵌入式的KV数据库，由Facebook基于levelDB开发。\n多数情况下，看一把RocksDB看做是一个在本地的，数据落盘的，大数据量的Redis，且访问性能高于远端的Redis。\nRocksDB底层使用LSM树实现，但LSM树实际上并不是一棵具体的树，其实是一套存储处理算法。\nLSM树对KV的持久化，保持较高性能的读的基础上，实现了追加写，提供了写入的性能。","刷入临时twrp","刷入永久twrp","\u002Fblog-code\u002Fpage\u002F1\u002F",10000,"青春猪头-牧之原翔子-江之岛",2022,"grafana+loki+promtail搭建轻量日志系统","2022-01-16T00:00:00.000Z","夜深，好困，长话短说。","loki：存储查询日志的服务，对外提供一个http端口","promtail：收集日志，把日志发生到loki里进行管理","grafana：可以通过loki的接口查询日志","预备工作","grafana","\n  -p ","loki","https:\u002F\u002Fgrafana.com\u002Fdocs\u002Floki\u002Flatest\u002Fconfiguration\u002F","language-yaml","server","http_listen_port","3100","grpc_listen_port","store"," http"," 720h ","安装","\n  -config.file","promtail","https:\u002F\u002Fgrafana.com\u002Fdocs\u002Floki\u002Flatest\u002Fclients\u002Fpromtail\u002Fconfiguration\u002F","labels","查询","参考文章","\u002F折腾\u002F20220116","2022-01-16","RocksDB初步了解","wal","WAL","sstable","SSTable","compaction","Compaction","column-family","Column Family","\u002F中间件\u002F20220304","README","https:\u002F\u002Fcode.cellargalaxy.top\u002F","\u002F","2022-05-19T07:02:41.879Z","OLTP、OLAP与HTAP","参考文献","https:\u002F\u002Fcloud.tencent.com\u002Fdeveloper\u002Farticle\u002F1706006","https:\u002F\u002Fblog.51cto.com\u002Fkymdidicom\u002F3145671","\u002F中间件\u002F20220428","2022-05-19T07:02:41.883Z","Pixel2xl刷机手记","前期准备","https:\u002F\u002Fdevelopers.google.com\u002Fandroid\u002Fimages#taimen","https:\u002F\u002Fdownload.lineageos.org\u002Ftaimen","https:\u002F\u002Ftwrp.me\u002Fgoogle\u002Fgooglepixel2xl.html","https:\u002F\u002Fdeveloper.android.com\u002Fstudio\u002Freleases\u002Fplatform-tools","解锁","步骤","刷入ROM","fastboot devices","检查设备列表","flash-all.sh","https:\u002F\u002Freallysnow.moe\u002Farchives\u002F244.html","https:\u002F\u002Flemisky.github.io\u002F2020\u002F11\u002F30\u002FPixel-XL-%E5%88%B7%E6%9C%BA%E7%9B%B8%E5%85%B3\u002F","https:\u002F\u002Fwww.jianshu.com\u002Fp\u002F4017e9d6541c","https:\u002F\u002Fwww.itfanr.cc\u002F2018\u002F10\u002F16\u002Fgoogle-pixel-unlock-bl-and-root\u002F","https:\u002F\u002Fblog.csdn.net\u002Fachirandliu\u002Farticle\u002Fdetails\u002F105028423","https:\u002F\u002Fceshidao.com\u002Fhow-to-get-magisk-working-on-pixel-2-xl\u002F","https:\u002F\u002Fsandyfffeng.com\u002F2020\u002F05\u002F24\u002Fgoogle-pixel-2-%E7%A0%B4%E8%A7%A3%E7%94%B5%E4%BF%A14g-%E5%85%A8%E6%95%99%E7%A8%8B%EF%BC%88mac-windows-%E9%80%9A%E7%94%A8%EF%BC%89\u002F","https:\u002F\u002Fblog.isteed.cc\u002Fpost\u002F4291184207\u002F","https:\u002F\u002Fgist.github.com\u002Fcoeusite\u002F86f6318c13c5bc15aef13345f1bb3ed4","https:\u002F\u002Fwww.jianshu.com\u002Fp\u002F075ed256a85d","https:\u002F\u002Fwww.v2ex.com\u002Ft\u002F395935","https:\u002F\u002Fwww.v2ex.com\u002Ft\u002F598302","https:\u002F\u002Fandroid.poppur.com\u002Fjiaocheng\u002F10416.html","https:\u002F\u002Fwww.berlinchan.com\u002F2019\u002F09\u002Fupdate-android-10-and-flash-modem-for-china-telecom-4g","https:\u002F\u002Fwww.somedoc.net\u002F?p=4263","http:\u002F\u002Fwww.gandalf.site\u002F2018\u002F11\u002Fgoogle-pixel-4g.html","https:\u002F\u002Fwww.v2ex.com\u002Ft\u002F429528","https:\u002F\u002Fericclose.github.io\u002FPixel-modem-mod-for-China-Telecom.html","\u002F折腾\u002F20220425","chrome书签合并脚本","需求背景","chrome书签结构","标签，","language-xml","\"","...","书签解析","goquery","https:\u002F\u002Fgithub.com\u002Fcellargalaxy\u002Fgo_common\u002Fblob\u002Fmain\u002Ftool\u002Fbookmark.go","使用","\u002F折腾\u002F20220430")));