__NUXT_JSONP__("/view/$E6$8A$98$E8$85$BE/20220430/chrome$E4$B9$A6$E7$AD$BE$E5$90$88$E5$B9$B6$E8$84$9A$E6$9C$AC", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X){return {data:[{siteConfig:{siteName:z,siteHost:"https:\u002F\u002Fcellargalaxy.github.io",basePath:"\u002Fblog-code\u002F",navs:[{text:"文章",url:"\u002Fblog-code\u002Fpage\u002F1\u002F"},{text:"归档",url:"\u002Fblog-code\u002Farchive\u002F0\u002F"},{text:"画画",url:"\u002Fblog-code\u002Fhtml\u002Fhua.html"},{text:"开源",url:"\u002Fblog-code\u002Fhttps:\u002Fgithub.com\u002Fcellargalaxy\u002Fblog-vue"}],pageSize:10,urlReplace:{"^/file/blog/code":"http:\u002F\u002F123.207.79.108\u002Ffile\u002Ffile\u002Fblog\u002Fcode"},backgroundImage:{duration:A,fade:1000,images:[{url:"https:\u002F\u002Fi.loli.net\u002F2020\u002F01\u002F25\u002FcofTzDQXitjeVZ6.jpg",description:B,type:m},{url:"https:\u002F\u002Fi.loli.net\u002F2020\u002F01\u002F25\u002FsfaRJ2lVeM3NDbE.jpg",description:B,type:m},{url:"https:\u002F\u002Fi.loli.net\u002F2020\u002F01\u002F26\u002FKybiTdftam5Su7x.jpg",description:"青春猪头-双葉理央",type:m},{url:"https:\u002F\u002Fi.loli.net\u002F2020\u002F09\u002F08\u002FxdX73nfs24qgOYk.jpg",description:"京吹-明日香,久美子",type:m},{url:"https:\u002F\u002Fi.loli.net\u002F2020\u002F02\u002F14\u002FMAiruNcEFW2HYtg.jpg",description:"终将成为你-七海灯子,小糸侑",type:m},{url:"https:\u002F\u002Fi.loli.net\u002F2020\u002F02\u002F05\u002FEojdAxTDJsFpbPw.jpg",description:"玉子市场-北白川玉子",type:m},{url:"https:\u002F\u002Fi.loli.net\u002F2020\u002F01\u002F31\u002FAXxwJDRS9fmN2uU.jpg",description:"fate_hf-弓道馆",type:m},{url:"https:\u002F\u002Fi.loli.net\u002F2020\u002F02\u002F01\u002FaHhVObpJus6dnM4.jpg",description:"fate_hf-樱花树",type:m}]}},homeConfig:{brandInterval:A,brands:[{imageUrl:"https:\u002F\u002Fi.loli.net\u002F2020\u002F01\u002F21\u002FmMEAnwY5XPC2pFb.jpg",title:"日常",texts:["我们所度过的每个平凡的日常，也许就是连续不断发生的奇迹。","日々、私たちが過ごしている日常は、実は奇跡の連続なのかもしれない。"]},{imageUrl:"https:\u002F\u002Fi.loli.net\u002F2020\u002F04\u002F19\u002FH1MmXb9xPcYEhT2.jpg",title:"昨日之歌",texts:["时间梭梭箭如飞，人道漫漫步蹒跚","人間そんな変わるもんじゃないのに、月日ばっかどんどん過ぎて"]}],navs:[{text:"Github",url:"https:\u002F\u002Fgithub.com\u002Fcellargalaxy\u002F"}]},pageFootConfig:{lines:[[{text:"Copyright © 2017-? ."},{text:"备案？不存在的"},{text:"Powered by Nuxt.js & Github"}]]},buildTime:new Date(1652943415286),siteName:z,file:{slug:C,toc:[{id:t,depth:D,text:t},{id:u,depth:D,text:u}],body:{type:"root",children:[{type:b,tag:v,props:{id:E},children:[{type:b,tag:k,props:{href:"#%E9%9C%80%E6%B1%82%E8%83%8C%E6%99%AF",ariaHidden:p,tabIndex:q},children:[{type:b,tag:c,props:{className:[r,s]},children:[]}]},{type:a,value:E}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"鄙人有多个谷歌账号，在不同的电脑里使用。\n时间一长，不同账号和电脑的书签就会产生差异，很容易丢书签。\n虽然chrome对同一个账号，能在不同电脑之间同步书签。\n但是如果有设备长时间未离线后同步，会出现把已经删掉的书签又加回去的情况。\n并且我希望书签能在多个账号直接保持同步。"}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"其实找类似的功能的软件，没有一年也有半年了，始终无果。\n后来我意识到一个问题，不同账号的书签合并，跟合代码一样，是有可能发生冲突的，这个冲突显然没太多的办法进行自动处理。\n便最后还是决定自己写工具来手动定期合并书签罢。"}]},{type:a,value:g},{type:b,tag:v,props:{id:F},children:[{type:b,tag:k,props:{href:"#chrome%E4%B9%A6%E7%AD%BE%E7%BB%93%E6%9E%84",ariaHidden:p,tabIndex:q},children:[{type:b,tag:c,props:{className:[r,s]},children:[]}]},{type:a,value:F}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"从chrome导出的书签html其实只是个xml，折腾xml的结构折腾了好久。\n一是chrome的书签xml结构设计就不好解析，二是go的xml工具还是稀烂的。"}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"结构式最核心的是"},{type:b,tag:h,props:{},children:[{type:a,value:j}]},{type:a,value:G},{type:b,tag:h,props:{},children:[{type:a,value:j}]},{type:a,value:"标签有两种类型，分别是链接类型和文件夹类型。"}]},{type:a,value:g},{type:b,tag:H,props:{id:t},children:[{type:b,tag:k,props:{href:"#%E9%93%BE%E6%8E%A5%E7%B1%BB%E5%9E%8B",ariaHidden:p,tabIndex:q},children:[{type:b,tag:c,props:{className:[r,s]},children:[]}]},{type:a,value:t}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:b,tag:h,props:{},children:[{type:a,value:j}]},{type:a,value:"标签里面包住一个"},{type:b,tag:h,props:{},children:[{type:a,value:k}]},{type:a,value:G},{type:b,tag:h,props:{},children:[{type:a,value:k}]},{type:a,value:"标签就是书签的具体信息。"}]},{type:a,value:g},{type:b,tag:I,props:{className:[J]},children:[{type:b,tag:K,props:{className:[L,M]},children:[{type:b,tag:h,props:{},children:[{type:b,tag:c,props:{className:[d,f]},children:[{type:b,tag:c,props:{className:[d,f]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,f]},children:[{type:b,tag:c,props:{className:[d,f]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:k}]},{type:a,value:" "},{type:b,tag:c,props:{className:[d,"attr-name"]},children:[{type:a,value:"href"}]},{type:b,tag:c,props:{className:[d,"attr-value"]},children:[{type:b,tag:c,props:{className:[d,e,"attr-equals"]},children:[{type:a,value:"="}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:N}]},{type:a,value:"https:\u002F\u002Fwww.google.com\u002F"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:N}]}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]}]},{type:a,value:"google"},{type:b,tag:c,props:{className:[d,f]},children:[{type:b,tag:c,props:{className:[d,f]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:b,tag:c,props:{className:[d,f]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]}]},{type:a,value:g}]}]}]},{type:a,value:g},{type:b,tag:H,props:{id:u},children:[{type:b,tag:k,props:{href:"#%E6%96%87%E4%BB%B6%E5%A4%B9%E7%B1%BB%E5%9E%8B",ariaHidden:p,tabIndex:q},children:[{type:b,tag:c,props:{className:[r,s]},children:[]}]},{type:a,value:u}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"文件夹类型的"},{type:b,tag:h,props:{},children:[{type:a,value:j}]},{type:a,value:"标签里，直接子标签是没有"},{type:b,tag:h,props:{},children:[{type:a,value:k}]},{type:a,value:"标签的。\n而是第一个表示是"},{type:b,tag:h,props:{},children:[{type:a,value:y}]},{type:a,value:"，记录这个文件夹的名称。\n然后再有一个"},{type:b,tag:h,props:{},children:[{type:a,value:x}]},{type:a,value:"标签，包含着文件夹里所包含的内容。\n文件夹里既可以包含链接也可以包含文件夹，所以在"},{type:b,tag:h,props:{},children:[{type:a,value:x}]},{type:a,value:"标签所包含的是多个"},{type:b,tag:h,props:{},children:[{type:a,value:j}]},{type:a,value:"标签。"}]},{type:a,value:g},{type:b,tag:I,props:{className:[J]},children:[{type:b,tag:K,props:{className:[L,M]},children:[{type:b,tag:h,props:{},children:[{type:b,tag:c,props:{className:[d,f]},children:[{type:b,tag:c,props:{className:[d,f]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,f]},children:[{type:b,tag:c,props:{className:[d,f]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:y}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]}]},{type:a,value:"搜索引擎"},{type:b,tag:c,props:{className:[d,f]},children:[{type:b,tag:c,props:{className:[d,f]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:y}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,f]},children:[{type:b,tag:c,props:{className:[d,f]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:x}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]}]},{type:a,value:O},{type:b,tag:c,props:{className:[d,f]},children:[{type:b,tag:c,props:{className:[d,f]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]}]},{type:a,value:P},{type:b,tag:c,props:{className:[d,f]},children:[{type:b,tag:c,props:{className:[d,f]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]}]},{type:a,value:O},{type:b,tag:c,props:{className:[d,f]},children:[{type:b,tag:c,props:{className:[d,f]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]}]},{type:a,value:P},{type:b,tag:c,props:{className:[d,f]},children:[{type:b,tag:c,props:{className:[d,f]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,f]},children:[{type:b,tag:c,props:{className:[d,f]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:x}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:b,tag:c,props:{className:[d,f]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]}]},{type:a,value:g}]}]}]},{type:a,value:g},{type:b,tag:v,props:{id:Q},children:[{type:b,tag:k,props:{href:"#%E4%B9%A6%E7%AD%BE%E8%A7%A3%E6%9E%90",ariaHidden:p,tabIndex:q},children:[{type:b,tag:c,props:{className:[r,s]},children:[]}]},{type:a,value:Q}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"书签的xml没有id和class，不能直接映射为结构体，书签也不闭合，还需要递归解析，添加了不少难度。\n经过了两天折腾，解析思路是把xml导到"},{type:b,tag:h,props:{},children:[{type:a,value:"github.com\u002FPuerkitoBio\u002Fgoquery"}]},{type:a,value:"当html解析。\n"},{type:b,tag:h,props:{},children:[{type:a,value:R}]},{type:a,value:"会给xml外面自动包和html、head和body。\n然后"},{type:b,tag:h,props:{},children:[{type:a,value:R}]},{type:a,value:"的选择器都以body绝对的开始标签，往后加定位标签。相当于用“绝对路径”而不是“相对路径”。\n一开始递归想用“相对路径”，但是翻遍github，go就没库能支持，浪费了很多时间。"}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"详细看代码吧："},{type:b,tag:k,props:{href:S,rel:["nofollow","noopener","noreferrer"],target:"_blank"},children:[{type:a,value:S}]}]},{type:a,value:g},{type:b,tag:v,props:{id:T},children:[{type:b,tag:k,props:{href:"#%E4%BD%BF%E7%94%A8",ariaHidden:p,tabIndex:q},children:[{type:b,tag:c,props:{className:[r,s]},children:[]}]},{type:a,value:T}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"将xml转成csv，对全部书签进行排序，输出到csv文件保持到github上。\n排序的规则的，不考虑请求协议，将域名倒过来，后面再接上path。\n例如"},{type:b,tag:h,props:{},children:[{type:a,value:"https:\u002F\u002Fwww.google.com\u002Fa?b=c#d"}]},{type:a,value:" ，排序的key是 "},{type:b,tag:h,props:{},children:[{type:a,value:"moc.elgoog.www\u002Fa?b=c#d"}]},{type:a,value:"。\n能让域名相近或者二级三级域名的放在一起。\n通过github版本管理管理书签，github上的书签作为冷备份。\n需要使用时将csv转回xml，通过floccus来进行热同步。"}]}]},dir:U,path:"\u002F折腾\u002F20220430\u002Fchrome书签合并脚本",extension:".md",createdAt:V,updatedAt:V,excerpt:W,title:C,url:"\u002Fblog-code\u002Fview\u002F$E6$8A$98$E8$85$BE\u002F20220430\u002Fchrome$E4$B9$A6$E7$AD$BE$E5$90$88$E5$B9$B6$E8$84$9A$E6$9C$AC\u002F",createAt:new Date(1652943318377),updateAt:new Date(1652943318377),attributes:[{name:"createAt",value:X},{name:"updateAt",value:X},{name:"sort",value:U,url:"\u002Fblog-code\u002Fpage\u002F$E6$8A$98$E8$85$BE\u002F20220430\u002F1\u002F"}]}}],fetch:{},mutations:W}}("text","element","span","token","punctuation","tag","\n","code","\u003E","dt","a","p","wide","\u003C","\u003C\u002F","true",-1,"icon","icon-link","链接类型","文件夹类型","h1","\n    ","dl","h3","无名の窝",10000,"青春猪头-牧之原翔子-江之岛","chrome书签合并脚本",2,"需求背景","chrome书签结构","标签，","h2","div","nuxt-content-highlight","pre","language-xml","line-numbers","\"","\n        ","...","书签解析","goquery","https:\u002F\u002Fgithub.com\u002Fcellargalaxy\u002Fgo_common\u002Fblob\u002Fmain\u002Ftool\u002Fbookmark.go","使用","\u002F折腾\u002F20220430","2022-05-19T06:55:18.377Z",void 0,"2022-05-19")));