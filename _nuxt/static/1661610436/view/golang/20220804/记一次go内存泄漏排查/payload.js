__NUXT_JSONP__("/view/golang/20220804/%E8%AE%B0%E4%B8%80%E6%AC%A1go%E5%86%85%E5%AD%98%E6%B3%84%E6%BC%8F%E6%8E%92%E6%9F%A5", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao){return {data:[{siteConfig:{siteName:Z,siteHost:"https:\u002F\u002Fcellargalaxy.github.io",basePath:"\u002Fblog-code\u002F",navs:[{text:"文章",url:"\u002Fblog-code\u002Fpage\u002F1\u002F"},{text:"归档",url:"\u002Fblog-code\u002Farchive\u002F0\u002F"},{text:"画画",url:"\u002Fblog-code\u002Fhtml\u002Fhua.html"},{text:"开源",url:"\u002Fblog-code\u002Fhttps:\u002Fgithub.com\u002Fcellargalaxy\u002Fblog-vue"}],pageSize:10,urlReplace:{"^/file/blog/code":"https:\u002F\u002Foracleamd1.dynv6.net\u002Ffile\u002Ffile\u002Fblog\u002Fcode"},backgroundImage:{duration:_,fade:1000,images:[{url:"https:\u002F\u002Fi.loli.net\u002F2020\u002F01\u002F25\u002FcofTzDQXitjeVZ6.jpg",description:$,type:r},{url:"https:\u002F\u002Fi.loli.net\u002F2020\u002F01\u002F25\u002FsfaRJ2lVeM3NDbE.jpg",description:$,type:r},{url:"https:\u002F\u002Fi.loli.net\u002F2020\u002F01\u002F26\u002FKybiTdftam5Su7x.jpg",description:"青春猪头-双葉理央",type:r},{url:"https:\u002F\u002Fi.loli.net\u002F2020\u002F09\u002F08\u002FxdX73nfs24qgOYk.jpg",description:"京吹-明日香,久美子",type:r},{url:"https:\u002F\u002Fi.loli.net\u002F2020\u002F02\u002F14\u002FMAiruNcEFW2HYtg.jpg",description:"终将成为你-七海灯子,小糸侑",type:r},{url:"https:\u002F\u002Fi.loli.net\u002F2020\u002F02\u002F05\u002FEojdAxTDJsFpbPw.jpg",description:"玉子市场-北白川玉子",type:r},{url:"https:\u002F\u002Fi.loli.net\u002F2020\u002F01\u002F31\u002FAXxwJDRS9fmN2uU.jpg",description:"fate_hf-弓道馆",type:r},{url:"https:\u002F\u002Fi.loli.net\u002F2020\u002F02\u002F01\u002FaHhVObpJus6dnM4.jpg",description:"fate_hf-樱花树",type:r}]}},homeConfig:{brandInterval:_,brands:[{imageUrl:"https:\u002F\u002Fi.loli.net\u002F2020\u002F01\u002F21\u002FmMEAnwY5XPC2pFb.jpg",title:"日常",texts:["我们所度过的每个平凡的日常，也许就是连续不断发生的奇迹。","日々、私たちが過ごしている日常は、実は奇跡の連続なのかもしれない。"]},{imageUrl:"https:\u002F\u002Fi.loli.net\u002F2020\u002F04\u002F19\u002FH1MmXb9xPcYEhT2.jpg",title:"昨日之歌",texts:["时间梭梭箭如飞，人道漫漫步蹒跚","人間そんな変わるもんじゃないのに、月日ばっかどんどん過ぎて"]}],navs:[{text:"Github",url:"https:\u002F\u002Fgithub.com\u002Fcellargalaxy\u002F"}]},pageFootConfig:{lines:[[{text:"Copyright © 2017-? ."},{text:"备案？不存在的"},{text:"Powered by Nuxt.js & Github"}]]},buildTime:new Date(1661610443025),siteName:Z,file:{slug:aa,toc:[{id:H,depth:A,text:H},{id:I,depth:A,text:I},{id:J,depth:A,text:J},{id:K,depth:A,text:K},{id:L,depth:A,text:L}],body:{type:"root",children:[{type:b,tag:B,props:{id:H},children:[{type:b,tag:s,props:{href:"#%E6%B7%BB%E5%8A%A0%E5%88%86%E6%9E%90",ariaHidden:C,tabIndex:D},children:[{type:b,tag:c,props:{className:[E,F]},children:[]}]},{type:a,value:H}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"排查工具我用的是PProf。"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"对于web服务的使用，可以对外暴露一个端口拉取分析。"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"使用go自带的web服务"}]},{type:a,value:e},{type:b,tag:t,props:{className:[u]},children:[{type:b,tag:v,props:{className:[w,Q]},children:[{type:b,tag:l,props:{},children:[{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:R}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:T}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:j}]},{type:a,value:o},{type:b,tag:c,props:{className:[d,M]},children:[{type:a,value:U}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"\"net\u002Fhttp\u002Fpprof\""}]},{type:a,value:o},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"\"http\""}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:k}]},{type:a,value:V},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:G}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:k}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:x}]},{type:a,value:o},{type:b,tag:c,props:{className:[d,M]},children:[{type:a,value:U}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:N}]},{type:a,value:" http"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:q}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"ListenAndServe"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:ac}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:O}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,M]},children:[{type:a,value:"nil"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:k}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:z}]},{type:a,value:e}]}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"使用gin的话，可以使用"},{type:b,tag:l,props:{},children:[{type:a,value:"github.com\u002Fgin-contrib\u002Fpprof"}]},{type:a,value:"包"}]},{type:a,value:e},{type:b,tag:t,props:{className:[u]},children:[{type:b,tag:v,props:{className:[w,Q]},children:[{type:b,tag:l,props:{},children:[{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:R}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:T}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:j}]},{type:a,value:o},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"\"github.com\u002Fgin-contrib\u002Fpprof\""}]},{type:a,value:o},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"\"github.com\u002Fgin-gonic\u002Fgin\""}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:k}]},{type:a,value:V},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:G}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:k}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:x}]},{type:a,value:"\n  engine "},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:ad}]},{type:a,value:" gin"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:q}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"Default"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:k}]},{type:a,value:"\n  debug "},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:ad}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:q}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"Group"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"\"\u002Fdebug\""}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:k}]},{type:a,value:"\n  pprof"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:q}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"RouteRegister"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:j}]},{type:a,value:"debug"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:O}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"\"\u002Fpprof\""}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:k}]},{type:a,value:"\n\n  "},{type:b,tag:c,props:{className:[d,M]},children:[{type:a,value:U}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:N}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:q}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"Run"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:ac}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:k}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:z}]},{type:a,value:e}]}]}]},{type:a,value:e},{type:b,tag:B,props:{id:I},children:[{type:b,tag:s,props:{href:"#%E5%88%86%E6%9E%90%E7%B1%BB%E5%9E%8B",ariaHidden:C,tabIndex:D},children:[{type:b,tag:c,props:{className:[E,F]},children:[]}]},{type:a,value:I}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"这时候打开 "},{type:b,tag:l,props:{},children:[{type:a,value:"http:\u002F\u002F127.0.0.1:6060\u002Fdebug\u002Fpprof\u002F"}]},{type:a,value:" 应该就能看到分析页面"}]},{type:a,value:e},{type:b,tag:t,props:{className:[u]},children:[{type:b,tag:v,props:{className:[w,af]},children:[{type:b,tag:l,props:{},children:[{type:a,value:"\u002Fdebug\u002Fpprof\u002F\n\nTypes of profiles available:\nCount Profile\n342   allocs\n0     block\n0     cmdline\n18    goroutine\n342   heap\n0     mutex\n0     profile\n17    threadcreate\n0     trace\nfull goroutine stack dump\n"}]}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"下面还有一些分析指标的说明"}]},{type:a,value:e},{type:b,tag:P,props:{},children:[{type:a,value:e},{type:b,tag:g,props:{},children:[{type:a,value:"allocs：过去分配过的内存分析"}]},{type:a,value:e},{type:b,tag:g,props:{},children:[{type:a,value:"block：导致阻塞的堆栈"}]},{type:a,value:e},{type:b,tag:g,props:{},children:[{type:a,value:"cmdline：程序的命令行完整执行调用路径"}]},{type:a,value:e},{type:b,tag:g,props:{},children:[{type:a,value:"goroutine：当前所有的协程情况"}]},{type:a,value:e},{type:b,tag:g,props:{},children:[{type:a,value:"heap：当前内存分配情况"}]},{type:a,value:e},{type:b,tag:g,props:{},children:[{type:a,value:"mutex：当前导致互斥锁竞争的持有者堆栈情况"}]},{type:a,value:e},{type:b,tag:g,props:{},children:[{type:a,value:"profile：默认30s的CPU的profile"}]},{type:a,value:e},{type:b,tag:g,props:{},children:[{type:a,value:"threadcreate：查看新创建的OS线程堆栈情况"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:B,props:{id:J},children:[{type:b,tag:s,props:{href:"#%E5%88%86%E6%9E%90%E5%8F%AF%E8%A7%86%E5%8C%96",ariaHidden:C,tabIndex:D},children:[{type:b,tag:c,props:{className:[E,F]},children:[]}]},{type:a,value:J}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"可以通过终端交互查看，但还是推荐网页可视化比较省心。"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"使用网页可视化前需要安装"},{type:b,tag:l,props:{},children:[{type:a,value:"graphviz"}]},{type:a,value:"来渲染页面。"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"使用命令下载并渲染分析，xxx就是上面的某种分析类型。之后后会自动打开浏览器。"}]},{type:a,value:e},{type:b,tag:t,props:{className:[u]},children:[{type:b,tag:v,props:{className:[w,"language-shell"]},children:[{type:b,tag:l,props:{},children:[{type:a,value:"go tool pprof "},{type:b,tag:c,props:{className:[d,"parameter","variable"]},children:[{type:a,value:"-http"}]},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:N}]},{type:a,value:":6061 http:\u002F\u002Flocalhost:6060\u002Fdebug\u002Fpprof\u002Fxxx\n"}]}]}]},{type:a,value:e},{type:b,tag:B,props:{id:K},children:[{type:b,tag:s,props:{href:"#%E5%8F%AF%E8%A7%86%E5%8C%96%E7%9A%84%E8%8F%9C%E5%8D%95",ariaHidden:C,tabIndex:D},children:[{type:b,tag:c,props:{className:[E,F]},children:[]}]},{type:a,value:K}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:l,props:{},children:[{type:a,value:"view"}]},{type:a,value:"里有不同的可视化方式，分别是"}]},{type:a,value:e},{type:b,tag:P,props:{},children:[{type:a,value:e},{type:b,tag:g,props:{},children:[{type:a,value:"Top：会罗列各个方法的资源消耗，点一下可以排序\n"},{type:b,tag:P,props:{},children:[{type:a,value:e},{type:b,tag:g,props:{},children:[{type:a,value:"flat：方法自身的资源消耗"}]},{type:a,value:e},{type:b,tag:g,props:{},children:[{type:a,value:"flat%：方法自身的资源消耗占比"}]},{type:a,value:e},{type:b,tag:g,props:{},children:[{type:a,value:"sum%：排序后的累加的资源消耗占比"}]},{type:a,value:e},{type:b,tag:g,props:{},children:[{type:a,value:"cum：方法及其所调用的方法的资源消耗总和"}]},{type:a,value:e},{type:b,tag:g,props:{},children:[{type:a,value:"cum%：方法及其所调用的方法的资源消耗总和占比"}]},{type:a,value:e},{type:b,tag:g,props:{},children:[{type:a,value:"Name：方法名"}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:g,props:{},children:[{type:a,value:"Graph：一个方法调用关系图，框越大消耗越大。第一行是包名，第二行是方法名，第三行是flat+flat%，第四行是cum+cum%"}]},{type:a,value:e},{type:b,tag:g,props:{},children:[{type:a,value:"Flame Graph：火焰图，方法的cum可视化图形"}]},{type:a,value:e},{type:b,tag:g,props:{},children:[{type:a,value:"Peek：相比top，增加了方法的调用者和被调用者"}]},{type:a,value:e},{type:b,tag:g,props:{},children:[{type:a,value:"Source：可以看到源代码，对源代码基本进行分析"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"如果是选择了内存的指标，"},{type:b,tag:l,props:{},children:[{type:a,value:"simple"}]},{type:a,value:"里可以进一步对内存做进一步的过滤"}]},{type:a,value:e},{type:b,tag:P,props:{},children:[{type:a,value:e},{type:b,tag:g,props:{},children:[{type:a,value:"alloc_objects：方法的历史内存对象数量"}]},{type:a,value:e},{type:b,tag:g,props:{},children:[{type:a,value:"alloc_space：方法的历史内存分配大小"}]},{type:a,value:e},{type:b,tag:g,props:{},children:[{type:a,value:"inuse_objects：方法的当前内存对象数量"}]},{type:a,value:e},{type:b,tag:g,props:{},children:[{type:a,value:"inuse_space：方法的当前内存分配大小"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:B,props:{id:L},children:[{type:b,tag:s,props:{href:"#%E5%8E%9F%E5%9B%A0%E5%88%86%E6%9E%90",ariaHidden:C,tabIndex:D},children:[{type:b,tag:c,props:{className:[E,F]},children:[]}]},{type:a,value:L}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"这里简单看heap的top，在去看看Graph。"}]},{type:a,value:e},{type:b,tag:t,props:{className:[u]},children:[{type:b,tag:v,props:{className:[w,af]},children:[{type:b,tag:l,props:{},children:[{type:a,value:"Flat      Flat%    Sum%    Cum         Cum%    Name Inlined?\n9728.45kB  37.33%  37.33%  9728.45kB   37.33%  context.WithValue    \n5120.08kB  19.65%  56.98%  14848.52kB  56.98%  github.com\u002Fcellargalaxy\u002Fgo_common\u002Futil.SetCtxValue   (inline)\n2562.81kB  9.84%   66.82%  2562.81kB   9.84%   runtime.allocm   \n2560.04kB  9.82%   76.64%  17408.56kB  66.81%  github.com\u002Fcellargalaxy\u002Fgo_common\u002Futil.ResetLogId    \n2449.92kB  9.40%   86.04%  2961.94kB   11.37%  modernc.org\u002Flibc\u002Fhonnef.co\u002Fgo\u002Fnetdb.init.0   \n561.50kB   2.15%   88.20%  17970.06kB  68.96%  github.com\u002Fcellargalaxy\u002Fserver_center\u002Fsdk.flushEvent \n...\n"}]}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"包含的对象内存最大头的调用链路是"},{type:b,tag:l,props:{},children:[{type:a,value:"flushEvent-\u003EResetLogId-\u003ESetCtxValue-\u003EWithValue"}]},{type:a,value:"。"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"他没有直接告诉我那个对象站内存大。一开始我是没看懂，想不明白。"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"后来想啊想啊，想到了我代码里有这么一段代码。"}]},{type:a,value:e},{type:b,tag:t,props:{className:[u]},children:[{type:b,tag:v,props:{className:[w,Q]},children:[{type:b,tag:l,props:{},children:[{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:R}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:T}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:j}]},{type:a,value:o},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"\"context\""}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:k}]},{type:a,value:V},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:G}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"flushEvent"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:j}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:q}]},{type:a,value:X},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:k}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:x}]},{type:a,value:o},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:"for"}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:x}]},{type:a,value:"\n    ctx "},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:N}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ag}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:j}]},{type:a,value:Y},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:k}]},{type:a,value:"\n    "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ah}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:j}]},{type:a,value:Y},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:k}]},{type:a,value:o},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:z}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:z}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:G}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ah}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:j}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:q}]},{type:a,value:X},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:k}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:x}]},{type:a,value:o},{type:b,tag:c,props:{className:[d,ai]},children:[{type:a,value:"\u002F\u002Fdo something"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:z}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:G}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ag}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:j}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:q}]},{type:a,value:X},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:k}]},{type:a,value:aj},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:q}]},{type:a,value:"Context "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:x}]},{type:a,value:o},{type:b,tag:c,props:{className:[d,ai]},children:[{type:a,value:"\u002F\u002F省略SetCtxValue的逻辑"}]},{type:a,value:o},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:"return"}]},{type:a,value:aj},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:q}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"WithValue"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:j}]},{type:a,value:Y},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:O}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"\"xxx\""}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:O}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"\"yyy\""}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:k}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:z}]},{type:a,value:e}]}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:l,props:{},children:[{type:a,value:"context.Context"}]},{type:a,value:"不是一个map，每次for循环给ctx加值，值会一直累加，不会释放。"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"给ctx加的值不大，并且for循环频率不高，所以内存增值是比较缓慢的，符合事件观察的现象。"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"参考文献"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:s,props:{href:ak,rel:["nofollow","noopener","noreferrer"],target:"_blank"},children:[{type:a,value:ak}]}]}]},dir:al,path:"\u002Fgolang\u002F20220804\u002F记一次go内存泄漏排查",extension:".md",createdAt:am,updatedAt:am,excerpt:an,title:aa,url:"\u002Fblog-code\u002Fview\u002Fgolang\u002F20220804\u002F记一次go内存泄漏排查\u002F",createAt:new Date(1661610308987),updateAt:new Date(1661610308987),attributes:[{name:"createAt",value:ao},{name:"updateAt",value:ao},{name:"sort",value:al,url:"\u002Fblog-code\u002Fpage\u002Fgolang\u002F20220804\u002F1\u002F"}]}}],fetch:{},mutations:an}}("text","element","span","token","\n","punctuation","li"," ","p","(",")","code","keyword","function","\n  ","string",".","wide","a","div","nuxt-content-highlight","pre","line-numbers","{","operator","}",2,"h2","true",-1,"icon","icon-link","func","添加分析","分析类型","分析可视化","可视化的菜单","原因分析","boolean","=",",","ul","language-go","package"," main\n\n","import","_","\n\n","ctx context","Context","ctx","无名の窝",10000,"青春猪头-牧之原翔子-江之岛","记一次go内存泄漏排查","main","\":6060\"",":="," engine","language-text","ResetLogId","flush","comment"," context","https:\u002F\u002Fgolang2.eddycjy.com\u002Fposts\u002Fch6\u002F01-pprof-1\u002F","\u002Fgolang\u002F20220804","2022-08-27T14:25:08.987Z",void 0,"2022-08-27")));