__NUXT_JSONP__("/view/折腾/20220702/grafana+prometheus+node-exporter搭建监控", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao){return {data:[{siteConfig:{siteName:Z,siteHost:"https:\u002F\u002Fcellargalaxy.github.io",basePath:"\u002Fblog-code\u002F",navs:[{text:"文章",url:"\u002Fblog-code\u002Fpage\u002F1\u002F"},{text:"归档",url:"\u002Fblog-code\u002Farchive\u002F0\u002F"},{text:"画画",url:"\u002Fblog-code\u002Fhtml\u002Fhua.html"},{text:"开源",url:"\u002Fblog-code\u002Fhttps:\u002Fgithub.com\u002Fcellargalaxy\u002Fblog-vue"}],pageSize:10,urlReplace:{"^/file/blog/code":"https:\u002F\u002Foracleamd1.dynv6.net\u002Ffile\u002Ffile\u002Fblog\u002Fcode"},backgroundImage:{duration:_,fade:1000,images:[{url:"https:\u002F\u002Fi.loli.net\u002F2020\u002F01\u002F25\u002FcofTzDQXitjeVZ6.jpg",description:$,type:n},{url:"https:\u002F\u002Fi.loli.net\u002F2020\u002F01\u002F25\u002FsfaRJ2lVeM3NDbE.jpg",description:$,type:n},{url:"https:\u002F\u002Fi.loli.net\u002F2020\u002F01\u002F26\u002FKybiTdftam5Su7x.jpg",description:"青春猪头-双葉理央",type:n},{url:"https:\u002F\u002Fi.loli.net\u002F2020\u002F09\u002F08\u002FxdX73nfs24qgOYk.jpg",description:"京吹-明日香,久美子",type:n},{url:"https:\u002F\u002Fi.loli.net\u002F2020\u002F02\u002F14\u002FMAiruNcEFW2HYtg.jpg",description:"终将成为你-七海灯子,小糸侑",type:n},{url:"https:\u002F\u002Fi.loli.net\u002F2020\u002F02\u002F05\u002FEojdAxTDJsFpbPw.jpg",description:"玉子市场-北白川玉子",type:n},{url:"https:\u002F\u002Fi.loli.net\u002F2020\u002F01\u002F31\u002FAXxwJDRS9fmN2uU.jpg",description:"fate_hf-弓道馆",type:n},{url:"https:\u002F\u002Fi.loli.net\u002F2020\u002F02\u002F01\u002FaHhVObpJus6dnM4.jpg",description:"fate_hf-樱花树",type:n}]}},homeConfig:{brandInterval:_,brands:[{imageUrl:"https:\u002F\u002Fi.loli.net\u002F2020\u002F01\u002F21\u002FmMEAnwY5XPC2pFb.jpg",title:"日常",texts:["我们所度过的每个平凡的日常，也许就是连续不断发生的奇迹。","日々、私たちが過ごしている日常は、実は奇跡の連続なのかもしれない。"]},{imageUrl:"https:\u002F\u002Fi.loli.net\u002F2020\u002F04\u002F19\u002FH1MmXb9xPcYEhT2.jpg",title:"昨日之歌",texts:["时间梭梭箭如飞，人道漫漫步蹒跚","人間そんな変わるもんじゃないのに、月日ばっかどんどん過ぎて"]}],navs:[{text:"Github",url:"https:\u002F\u002Fgithub.com\u002Fcellargalaxy\u002F"}]},pageFootConfig:{lines:[[{text:"Copyright © 2017-? ."},{text:"备案？不存在的"},{text:"Powered by Nuxt.js & Github"}]]},buildTime:new Date(1676800584618),siteName:Z,file:{slug:aa,toc:[{id:F,depth:x,text:F},{id:G,depth:x,text:G},{id:H,depth:x,text:H},{id:I,depth:x,text:I},{id:J,depth:x,text:J}],body:{type:"root",children:[{type:b,tag:y,props:{id:F},children:[{type:b,tag:k,props:{href:"#%E5%88%86%E5%B7%A5",ariaHidden:z,tabIndex:A},children:[{type:b,tag:c,props:{className:[B,C]},children:[]}]},{type:a,value:F}]},{type:a,value:e},{type:b,tag:D,props:{},children:[{type:a,value:e},{type:b,tag:l,props:{},children:[{type:a,value:"node-exporter：安装在每台主机上，用于收集主机数据"}]},{type:a,value:e},{type:b,tag:l,props:{},children:[{type:a,value:"prometheus：会去每台主机的node-exporter拉取收集数据"}]},{type:a,value:e},{type:b,tag:l,props:{},children:[{type:a,value:"grafana：查询prometheus的数据用于展示"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:y,props:{id:G},children:[{type:b,tag:k,props:{href:"#%E5%AE%89%E8%A3%85exporter",ariaHidden:z,tabIndex:A},children:[{type:b,tag:c,props:{className:[B,C]},children:[]}]},{type:a,value:G}]},{type:a,value:e},{type:b,tag:o,props:{},children:[{type:a,value:"运行起来大约只会消耗10M左右的内存"}]},{type:a,value:e},{type:b,tag:D,props:{},children:[{type:a,value:e},{type:b,tag:l,props:{},children:[{type:b,tag:k,props:{href:ab,rel:[t,u,v],target:w},children:[{type:a,value:ab}]}]},{type:a,value:e},{type:b,tag:l,props:{},children:[{type:b,tag:k,props:{href:ac,rel:[t,u,v],target:w},children:[{type:a,value:ac}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:R,props:{className:[S]},children:[{type:b,tag:T,props:{className:[U,V]},children:[{type:b,tag:p,props:{},children:[{type:b,tag:c,props:{className:[d,E]},children:[{type:a,value:"#port=9100"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:K}]},{type:a,value:j},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:L}]},{type:a,value:M},{type:b,tag:c,props:{className:[d,h,g]},children:[{type:a,value:N}]},{type:a,value:j},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,h,g]},children:[{type:a,value:O}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:s}]},{type:a,value:P},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,h,g]},children:[{type:a,value:Q}]},{type:a,value:" node-exporter "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,h,g]},children:[{type:a,value:"--net"}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ad}]},{type:a,value:j},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,h,g]},children:[{type:a,value:"--pid"}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ad}]},{type:a,value:j},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,h,g]},children:[{type:a,value:W}]},{type:a,value:j},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ae}]},{type:a,value:j},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:"\nprom\u002Fnode-exporter "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,h,g]},children:[{type:a,value:"--path.rootfs"}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:s}]},{type:a,value:"\u002Fhost\n\n"},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:K}]},{type:a,value:j},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:L}]},{type:a,value:M},{type:b,tag:c,props:{className:[d,h,g]},children:[{type:a,value:N}]},{type:a,value:j},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,h,g]},children:[{type:a,value:O}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:s}]},{type:a,value:P},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,h,g]},children:[{type:a,value:Q}]},{type:a,value:" mysqld-exporter "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,h,g]},children:[{type:a,value:X}]},{type:a,value:j},{type:b,tag:c,props:{className:[d,Y]},children:[{type:a,value:"9104"}]},{type:a,value:":9104 "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,h,g]},children:[{type:a,value:"-e"}]},{type:a,value:j},{type:b,tag:c,props:{className:[d,"assign-left",g]},children:[{type:a,value:"DATA_SOURCE_NAME"}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:"\"user:pw@(ip:port)\u002F\""}]},{type:a,value:j},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:"\nprom\u002Fmysqld-exporter\n\n"},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:K}]},{type:a,value:j},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:L}]},{type:a,value:M},{type:b,tag:c,props:{className:[d,h,g]},children:[{type:a,value:N}]},{type:a,value:j},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,h,g]},children:[{type:a,value:O}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:s}]},{type:a,value:P},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,h,g]},children:[{type:a,value:Q}]},{type:a,value:" redis-exporter "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,h,g]},children:[{type:a,value:X}]},{type:a,value:j},{type:b,tag:c,props:{className:[d,Y]},children:[{type:a,value:"9121"}]},{type:a,value:":9121 "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,h,g]},children:[{type:a,value:W}]},{type:a,value:j},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ae}]},{type:a,value:j},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:"\nbitnami\u002Fredis-exporter "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,h,g]},children:[{type:a,value:"--redis.addr"}]},{type:a,value:" redis:\u002F\u002Fip:port "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,h,g]},children:[{type:a,value:"--redis.password"}]},{type:a,value:j},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:"'pw'"}]},{type:a,value:e}]}]}]},{type:a,value:e},{type:b,tag:o,props:{},children:[{type:a,value:"浏览器打开"},{type:b,tag:p,props:{},children:[{type:a,value:"http:\u002F\u002Fip:9100\u002Fmetrics"}]},{type:a,value:" ，如果有东西就算安装完了"}]},{type:a,value:e},{type:b,tag:y,props:{id:H},children:[{type:b,tag:k,props:{href:"#%E5%AE%89%E8%A3%85prometheus",ariaHidden:z,tabIndex:A},children:[{type:b,tag:c,props:{className:[B,C]},children:[]}]},{type:a,value:H}]},{type:a,value:e},{type:b,tag:D,props:{},children:[{type:a,value:e},{type:b,tag:l,props:{},children:[{type:b,tag:k,props:{href:af,rel:[t,u,v],target:w},children:[{type:a,value:af}]}]},{type:a,value:e},{type:b,tag:l,props:{},children:[{type:b,tag:k,props:{href:ag,rel:[t,u,v],target:w},children:[{type:a,value:ag}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:o,props:{},children:[{type:a,value:"配置文件，看网上说数据默认过期是30日，但是没找到通过配置文件修改过期时间的方法"}]},{type:a,value:e},{type:b,tag:R,props:{className:[S]},children:[{type:b,tag:T,props:{className:[U,V]},children:[{type:b,tag:p,props:{},children:[{type:a,value:"global:\n  scrape_interval: 1m "},{type:b,tag:c,props:{className:[d,E]},children:[{type:a,value:"#默认情况下抓取目标的频率"}]},{type:a,value:"\n  scrape_timeout: 10s "},{type:b,tag:c,props:{className:[d,E]},children:[{type:a,value:"#刮取请求超时的时间"}]},{type:a,value:"\n  evaluation_interval: 1m "},{type:b,tag:c,props:{className:[d,E]},children:[{type:a,value:"#评估规则的频率"}]},{type:a,value:"\n\nscrape_configs: "},{type:b,tag:c,props:{className:[d,E]},children:[{type:a,value:"#抓取配置列表"}]},{type:a,value:"\n  - job_name: linux\n    metrics_path: "},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:"'\u002Fmetrics'"}]},{type:a,value:"\n    basic_auth:\n      username: "},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ah}]},{type:a,value:"\n      password: "},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ah}]},{type:a,value:"\n    static_configs:\n      - targets: "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:"["}]},{type:a,value:j},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:"'ip:port'"}]},{type:a,value:j},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:"]"}]},{type:a,value:"\n        labels:\n          instance: 实例名称\n"}]}]}]},{type:a,value:e},{type:b,tag:R,props:{className:[S]},children:[{type:b,tag:T,props:{className:[U,V]},children:[{type:b,tag:p,props:{},children:[{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:K}]},{type:a,value:j},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:L}]},{type:a,value:M},{type:b,tag:c,props:{className:[d,h,g]},children:[{type:a,value:N}]},{type:a,value:j},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,h,g]},children:[{type:a,value:O}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:s}]},{type:a,value:P},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,h,g]},children:[{type:a,value:Q}]},{type:a,value:" prometheus "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,h,g]},children:[{type:a,value:X}]},{type:a,value:j},{type:b,tag:c,props:{className:[d,Y]},children:[{type:a,value:"9090"}]},{type:a,value:":9090 "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,h,g]},children:[{type:a,value:W}]},{type:a,value:" \u002Fprometheus.yml:\u002Fetc\u002Fprometheus\u002Fprometheus.yml "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:"\nprom\u002Fprometheus\n"}]}]}]},{type:a,value:e},{type:b,tag:D,props:{},children:[{type:a,value:e},{type:b,tag:l,props:{},children:[{type:b,tag:p,props:{},children:[{type:a,value:"http:\u002F\u002Fip:9090\u002Fmetrics"}]},{type:a,value:ai}]},{type:a,value:e},{type:b,tag:l,props:{},children:[{type:b,tag:p,props:{},children:[{type:a,value:"http:\u002F\u002Fip:9090\u002Fgraph"}]},{type:a,value:ai}]},{type:a,value:e},{type:b,tag:l,props:{},children:[{type:b,tag:p,props:{},children:[{type:a,value:"http:\u002F\u002Fip:9090\u002Ftargets"}]},{type:a,value:" ：有机器列表，有"},{type:b,tag:p,props:{},children:[{type:a,value:"UP"}]},{type:a,value:"就是正常"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:y,props:{id:I},children:[{type:b,tag:k,props:{href:"#grafana%E5%AE%89%E8%A3%85",ariaHidden:z,tabIndex:A},children:[{type:b,tag:c,props:{className:[B,C]},children:[]}]},{type:a,value:I}]},{type:a,value:e},{type:b,tag:o,props:{},children:[{type:a,value:"略过"}]},{type:a,value:e},{type:b,tag:y,props:{id:J},children:[{type:b,tag:k,props:{href:"#grafana%E9%85%8D%E7%BD%AE",ariaHidden:z,tabIndex:A},children:[{type:b,tag:c,props:{className:[B,C]},children:[]}]},{type:a,value:J}]},{type:a,value:e},{type:b,tag:o,props:{},children:[{type:a,value:"在左边菜单的齿轮进入plugins，安装prometheus插件。\n填URL、Basic auth，HTTP Method选GET。最后save and test。"}]},{type:a,value:e},{type:b,tag:o,props:{},children:[{type:a,value:"下载grafana模板的json。\n推荐用"},{type:b,tag:k,props:{href:"https:\u002F\u002Fgrafana.com\u002Fgrafana\u002Fdashboards\u002F8919%E7%9A%842020%E5%B9%B4%E7%89%88%E6%9C%AC%EF%BC%8C2022%E7%89%88%E6%9C%AC%E5%A5%BD%E5%83%8F%E6%9C%89bug%EF%BC%8C%E7%A3%81%E7%9B%98%E6%95%B0%E6%8D%AE%E6%B2%A1%E6%98%BE%E7%A4%BA%E3%80%82",rel:[t,u,v],target:w},children:[{type:a,value:"https:\u002F\u002Fgrafana.com\u002Fgrafana\u002Fdashboards\u002F8919的2020年版本，2022版本好像有bug，磁盘数据没显示。"}]}]},{type:a,value:e},{type:b,tag:o,props:{},children:[{type:a,value:"在左边dashboards菜单里，选import，导入刚下载的json文件。\nVictoriaMetrics选刚创建的prometheus数据源。"}]},{type:a,value:e},{type:b,tag:o,props:{},children:[{type:a,value:"参考文章"}]},{type:a,value:e},{type:b,tag:D,props:{},children:[{type:a,value:e},{type:b,tag:l,props:{},children:[{type:b,tag:k,props:{href:aj,rel:[t,u,v],target:w},children:[{type:a,value:aj}]}]},{type:a,value:e},{type:b,tag:l,props:{},children:[{type:b,tag:k,props:{href:ak,rel:[t,u,v],target:w},children:[{type:a,value:ak}]}]},{type:a,value:e}]}]},dir:al,path:"\u002F折腾\u002F20220702\u002Fgrafana+prometheus+node-exporter搭建监控",extension:".md",createdAt:am,updatedAt:am,excerpt:an,title:aa,url:"\u002Fblog-code\u002Fview\u002F折腾\u002F20220702\u002Fgrafana+prometheus+node-exporter搭建监控\u002F",createAt:new Date(1676800455870),updateAt:new Date(1676800455870),attributes:[{name:"createAt",value:ao},{name:"updateAt",value:ao},{name:"sort",value:al,url:"\u002Fblog-code\u002Fpage\u002F折腾\u002F20220702\u002F1\u002F"}]}}],fetch:{},mutations:an}}("text","element","span","token","\n","punctuation","variable","parameter","\\"," ","a","li","string","wide","p","code","function","operator","=","nofollow","noopener","noreferrer","_blank",2,"h2","true",-1,"icon","icon-link","ul","comment","分工","安装exporter","安装prometheus","grafana安装","grafana配置","sudo","docker"," run ","-d","--restart","always ","--name","div","nuxt-content-highlight","pre","language-shell","line-numbers","-v","-p","number","无名の窝",10000,"青春猪头-牧之原翔子-江之岛","grafana+prometheus+node-exporter搭建监控","https:\u002F\u002Fgithub.com\u002Fprometheus\u002Fnode_exporter","https:\u002F\u002Fhub.docker.com\u002Fr\u002Fprom\u002Fnode-exporter","\"host\"","\"\u002F:\u002Fhost:ro,rslave\"","https:\u002F\u002Fprometheus.io\u002Fdocs\u002Fprometheus\u002Flatest\u002Finstallation\u002F","https:\u002F\u002Fhub.docker.com\u002Fr\u002Fprom\u002Fprometheus","'admin'"," ：有页面显示","https:\u002F\u002Fblog.csdn.net\u002Fqq_37688023\u002Farticle\u002Fdetails\u002F106532101","https:\u002F\u002Fwww.fyovo.com\u002F6180.html","\u002F折腾\u002F20220702","2023-02-19T09:54:15.870Z",void 0,"2023-02-19")));