__NUXT_JSONP__("/view/%E5%88%86%E5%B8%83%E5%BC%8F/20200709/%E5%88%86%E5%B8%83%E5%BC%8FID", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){return {data:[{navbarConfig:{brandText:n,brandUrl:"\u002Fblog-code\u002F",navs:[{text:"文章",url:"\u002Fblog-code\u002Fpage\u002F1\u002F"},{text:"归档",url:"\u002Fblog-code\u002Farchive\u002F0\u002F"},{text:"画画",url:"\u002Fblog-code\u002Fhtml\u002Fhua.html"},{text:"开源",url:"\u002Fblog-code\u002Fhttps:\u002Fgithub.com\u002Fcellargalaxy\u002Fblog-vue"}]},homeConfig:{brandInterval:10000,brands:[{imageUrl:"https:\u002F\u002Fi.loli.net\u002F2020\u002F01\u002F21\u002FmMEAnwY5XPC2pFb.jpg",title:"日常",texts:["我们所度过的每个平凡的日常，也许就是连续不断发生的奇迹。","日々、私たちが過ごしている日常は、実は奇跡の連続なのかもしれない。"]},{imageUrl:"https:\u002F\u002Fi.loli.net\u002F2020\u002F04\u002F19\u002FH1MmXb9xPcYEhT2.jpg",title:"昨日之歌",texts:["时间梭梭箭如飞，人道漫漫步蹒跚","人間そんな変わるもんじゃないのに、月日ばっかどんどん過ぎて"]}],navs:[{text:"Github",url:"https:\u002F\u002Fgithub.com\u002Fcellargalaxy\u002F"}]},pageFootConfig:{lines:[[{text:"Copyright © 2017-? ."},{text:"备案？不存在的"},{text:"Powered by Nuxt.js & Github"}]]},buildTime:new Date(1650990220479),siteName:n,file:{slug:o,description:"",createdAt:p,updatedAt:p,toc:[],body:{type:q,children:[{type:a,value:c},{type:b,tag:g,props:{id:"uuid"},children:[{type:b,tag:f,props:{href:"#uuid",ariaHidden:h,tabIndex:i},children:[{type:b,tag:j,props:{className:[k,l]},children:[]}]},{type:a,value:"UUID"}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"本地生成速度快"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"无序"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"字符串，占用空间大"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:g,props:{id:"数据库自增id"},children:[{type:b,tag:f,props:{href:"#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%87%AA%E5%A2%9Eid",ariaHidden:h,tabIndex:i},children:[{type:b,tag:j,props:{className:[k,l]},children:[]}]},{type:a,value:"数据库自增ID"}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"有序递增"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"插入数据时自动生成，方便"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"性能较低"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"分库分表：多主多从\n"},{type:b,tag:e,props:{},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"不同的自增步长"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"号段模式：一次性拿一段号段，减少数据库操作频率"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"扩容时先修改现有数据库的步长，之后新实例在一个较大的起始值开始自增"}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:g,props:{id:"redis"},children:[{type:b,tag:f,props:{href:"#redis",ariaHidden:h,tabIndex:i},children:[{type:b,tag:j,props:{className:[k,l]},children:[]}]},{type:a,value:"Redis"}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"性能好，满足递增"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"即便使用AOF，也有可能丢数据导致ID重复（如果是毫秒级的key来自增，redis重启恢复能到ms级？就算到ms级，缓个1ms不也行）"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:g,props:{id:r},children:[{type:b,tag:f,props:{href:"#%E9%9B%AA%E8%8A%B1%E7%AE%97%E6%B3%95",ariaHidden:h,tabIndex:i},children:[{type:b,tag:j,props:{className:[k,l]},children:[]}]},{type:a,value:r}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"第一个bit为0，标志正数"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"毫秒时间戳占41bit，为当前时间减去一个过去时间，41bit可用69年"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"机器ID占10bit，例如前五位机房编号，后五位机器编号"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"序列号占12bit，支持同一毫秒同一节点生成4096个ID，满了需要自旋到下一毫秒"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"时间回拨\n"},{type:b,tag:e,props:{},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"检查本次ID时间与上次ID时间，如果回拨"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"例如5ms以内则自旋一下"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"否则需要预留一个拓展位改为1"}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:m,props:{},children:[{type:a,value:"参考文章："}]},{type:a,value:c},{type:b,tag:m,props:{},children:[{type:b,tag:f,props:{href:"https:\u002F\u002Fgithub.com\u002FSnailclimb\u002FJavaGuide\u002Fblob\u002Fmaster\u002Fdocs\u002Fsystem-design\u002Fmicro-service\u002F%E5%88%86%E5%B8%83%E5%BC%8Fid%E7%94%9F%E6%88%90%E6%96%B9%E6%A1%88%E6%80%BB%E7%BB%93.md",rel:[s,t,u],target:v},children:[{type:a,value:"分布式id生成方案总结.md"}]}]},{type:a,value:c},{type:b,tag:m,props:{},children:[{type:b,tag:f,props:{href:"https:\u002F\u002Fgithub.com\u002Fjavagrowing\u002FJGrowing\u002Fblob\u002Fmaster\u002F%E5%88%86%E5%B8%83%E5%BC%8F\u002F%E5%A6%82%E6%9E%9C%E5%86%8D%E6%9C%89%E4%BA%BA%E9%97%AE%E4%BD%A0%E5%88%86%E5%B8%83%E5%BC%8F%20ID%EF%BC%8C%E8%BF%99%E7%AF%87%E6%96%87%E7%AB%A0%E4%B8%A2%E7%BB%99%E4%BB%96.md",rel:[s,t,u],target:v},children:[{type:a,value:"如果再有人问你分布式 ID，这篇文章丢给他.md"}]}]}]},excerpt:{type:q,children:[]},dir:w,path:"\u002F分布式\u002F20200709\u002F分布式ID",extension:".md",title:o,url:"\u002Fblog-code\u002Fview\u002F分布式\u002F20200709\u002F分布式ID",createAt:new Date(1594252800000),updateAt:new Date(1594252800000),attributes:[{name:"createAt",value:x},{name:"updateAt",value:x},{name:"sort",value:w,url:"\u002Fblog-code\u002Fpage\u002F分布式\u002F20200709\u002F1\u002F"}]}}],fetch:{},mutations:void 0}}("text","element","\n","li","ul","a","h1","true",-1,"span","icon","icon-link","p","无名の窝","分布式ID","2020-07-09T00:00:00.000Z","root","雪花算法","nofollow","noopener","noreferrer","_blank","\u002F分布式\u002F20200709","2020-07-09")));